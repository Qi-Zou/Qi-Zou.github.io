<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/me/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/me/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/me/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/me/images/logo.svg" color="#222">

<link rel="stylesheet" href="/me/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"qi-zou.github.io","root":"/me/","images":"/me/images","scheme":"Muse","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/me/js/config.js"></script>
<meta name="description" content="整理和记录所思所想">
<meta property="og:type" content="website">
<meta property="og:title" content="牛蛙">
<meta property="og:url" content="http://qi-zou.github.io/page/3/index.html">
<meta property="og:site_name" content="牛蛙">
<meta property="og:description" content="整理和记录所思所想">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="niuwa">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://qi-zou.github.io/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>牛蛙</title>
  




  <noscript>
    <link rel="stylesheet" href="/me/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/me/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">牛蛙</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">积累-沉淀</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/me/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/me/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/me/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/me/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/me/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-schedule"><a href="/me/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a></li>
        <li class="menu-item menu-item-sitemap"><a href="/me/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li>
        <li class="menu-item menu-item-commonweal"><a href="/me/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">niuwa</p>
  <div class="site-description" itemprop="description">整理和记录所思所想</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/me/archives/">
          <span class="site-state-item-count">28</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/me/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/me/tags/">
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qi-zou.github.io/2022/01/07/elasticsearch-exporter%E7%9A%84%E9%83%A8%E7%BD%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/me/images/avatar.gif">
      <meta itemprop="name" content="niuwa">
      <meta itemprop="description" content="整理和记录所思所想">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛蛙">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/me/2022/01/07/elasticsearch-exporter%E7%9A%84%E9%83%A8%E7%BD%B2/" class="post-title-link" itemprop="url">elasticsearch-exporter的部署</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-01-07 11:37:02" itemprop="dateCreated datePublished" datetime="2022-01-07T11:37:02+08:00">2022-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-10 10:50:09" itemprop="dateModified" datetime="2022-01-10T10:50:09+08:00">2022-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/me/categories/prometheus/" itemprop="url" rel="index"><span itemprop="name">prometheus</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="安装部署exporter"><a href="#安装部署exporter" class="headerlink" title="安装部署exporter"></a>安装部署exporter</h2><h3 id="下载exporter二进制包"><a href="#下载exporter二进制包" class="headerlink" title="下载exporter二进制包"></a>下载exporter二进制包</h3><p>根据不同的环境，选择不同的二进制包</p>
<p>下载地址：<a target="_blank" rel="noopener" href="https://github.com/prometheus-community/elasticsearch_exporter/releases/tag/v1.3.0">https://github.com/prometheus-community/elasticsearch_exporter/releases/tag/v1.3.0</a></p>
<p>我这里使用的是这个包【elasticsearch_exporter-1.3.0.linux-amd64.tar.gz】</p>
<p><a target="_blank" rel="noopener" href="https://github.com/prometheus-community/elasticsearch_exporter/releases/download/v1.3.0/elasticsearch_exporter-1.3.0.linux-amd64.tar.gz">https://github.com/prometheus-community/elasticsearch_exporter/releases/download/v1.3.0/elasticsearch_exporter-1.3.0.linux-amd64.tar.gz</a></p>
<h3 id="解压安装包"><a href="#解压安装包" class="headerlink" title="解压安装包"></a>解压安装包</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf elasticsearch_exporter-1.3.0.linux-amd64.tar.gz </span><br></pre></td></tr></table></figure>

<p><img src="image-20220104145334774.png" alt="image-20220104145334774"></p>
<p>解压之后的目录结构如下：</p>
<p><img src="image-20220104145445891.png" alt="image-20220104145445891"></p>
<h3 id="运行exporter"><a href="#运行exporter" class="headerlink" title="运行exporter"></a>运行exporter</h3><p>进入解压的目录，运行二进制文件 elasticsearch_exporter</p>
<p>根据被监控的elasticsearch是否用户密码，需要分为以下两种情况进行运行：</p>
<ol>
<li><p>不需要用户名和密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./elasticsearch_exporter --web.listen-address &quot;:9109&quot;  --es.uri http://localhost:9200</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<p>① 其中的localhost，是指被监控的elasticsearch所在的服务器地址，我这里是本机，因此可以直接使用localhost替代</p>
<p>② 如果启动是出现如下错误：</p>
<p>caller=clusterinfo.go:188 msg=”failed to retrieve cluster info from ES” err=”HTTP Request failed with code 401”</p>
<p>很显然是表示没有权限，需要使用用户名和密码访问elasticsearch，需要使用下面第二种方式进行启动即可</p>
</blockquote>
</li>
<li><p>需要用户名和密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./elasticsearch_exporter --web.listen-address &quot;:9109&quot;  --es.uri http://elastic:elastic@localhost:9200</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="对接prometheus"><a href="#对接prometheus" class="headerlink" title="对接prometheus"></a>对接prometheus</h2><p>我这里采用的http_sd_config的方式发现服务，需要了解的可以查阅《prometheus服务动态发现之<code>http_sd_config</code>》这篇文章</p>
<ol>
<li><p>在prometheus中添加如下配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;elasticsearch&#x27;</span></span><br><span class="line">  <span class="attr">http_sd_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">http://172.26.62.99:12000/prometheus/getTargetByType?exporterType=ELASTICSEARCH</span></span><br><span class="line">      <span class="attr">refresh_interval:</span> <span class="string">5s</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><img src="image-20220104151110867.png" alt="image-20220104151110867"></p>
<ol start="2">
<li>重启或reload一下prometheus即可</li>
</ol>
<blockquote>
<p>注意：</p>
<p>①  配置中的url填写的是自己提供的服务地址，prometheus会自动调用该接口获取服务节点信息，该接口返回的的结果如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="attr">&quot;targets&quot;</span>:[</span><br><span class="line">         <span class="string">&quot;172.18.40.xx:9109&quot;</span></span><br><span class="line">     ],</span><br><span class="line">     <span class="attr">&quot;labels&quot;</span>:&#123;</span><br><span class="line">         <span class="attr">&quot;job&quot;</span>:<span class="string">&quot;elasticsearch&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</blockquote>
<ol start="3">
<li><p>查看节点是否注册上去</p>
<p><img src="image-20220104151553748.png" alt="image-20220104151553748"></p>
</li>
</ol>
<h2 id="使用grafana查看监控大盘"><a href="#使用grafana查看监控大盘" class="headerlink" title="使用grafana查看监控大盘"></a>使用grafana查看监控大盘</h2><p>这里使用的是<code>6483</code>的监控大盘，访问地址如下：</p>
<p><a target="_blank" rel="noopener" href="https://grafana.com/grafana/dashboards/6483">https://grafana.com/grafana/dashboards/6483</a></p>
<p><img src="image-20220104160409120.png" alt="image-20220104160409120"></p>
<p>最终呈现的监控大盘如下：</p>
<p><img src="image-20220104160329215.png" alt="image-20220104160329215"></p>
<h2 id="elasticsearch-exporter监控的指标"><a href="#elasticsearch-exporter监控的指标" class="headerlink" title="elasticsearch_exporter监控的指标"></a>elasticsearch_exporter监控的指标</h2><p>通过访问exporter暴露出来的指标访问地址，可以查看到当前采集监控数据：</p>
<p><a target="_blank" rel="noopener" href="http://172.18.40.xx:9109/metrics">http://172.18.40.xx:9109/metrics</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br></pre></td><td class="code"><pre><span class="line"># HELP elasticsearch_breakers_estimated_size_bytes Estimated size in bytes of breaker</span><br><span class="line"># TYPE elasticsearch_breakers_estimated_size_bytes gauge</span><br><span class="line">elasticsearch_breakers_estimated_size_bytes&#123;breaker=&quot;accounting&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 3.1915479e+07</span><br><span class="line">elasticsearch_breakers_estimated_size_bytes&#123;breaker=&quot;fielddata&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 47232</span><br><span class="line">elasticsearch_breakers_estimated_size_bytes&#123;breaker=&quot;in_flight_requests&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 41421</span><br><span class="line">elasticsearch_breakers_estimated_size_bytes&#123;breaker=&quot;parent&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 3.2004132e+07</span><br><span class="line">elasticsearch_breakers_estimated_size_bytes&#123;breaker=&quot;request&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_breakers_limit_size_bytes Limit size in bytes for breaker</span><br><span class="line"># TYPE elasticsearch_breakers_limit_size_bytes gauge</span><br><span class="line">elasticsearch_breakers_limit_size_bytes&#123;breaker=&quot;accounting&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 2.112618496e+09</span><br><span class="line">elasticsearch_breakers_limit_size_bytes&#123;breaker=&quot;fielddata&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.267571097e+09</span><br><span class="line">elasticsearch_breakers_limit_size_bytes&#123;breaker=&quot;in_flight_requests&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 2.112618496e+09</span><br><span class="line">elasticsearch_breakers_limit_size_bytes&#123;breaker=&quot;parent&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.478832947e+09</span><br><span class="line">elasticsearch_breakers_limit_size_bytes&#123;breaker=&quot;request&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.267571097e+09</span><br><span class="line"># HELP elasticsearch_breakers_overhead Overhead of circuit breakers</span><br><span class="line"># TYPE elasticsearch_breakers_overhead counter</span><br><span class="line">elasticsearch_breakers_overhead&#123;breaker=&quot;accounting&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1</span><br><span class="line">elasticsearch_breakers_overhead&#123;breaker=&quot;fielddata&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.03</span><br><span class="line">elasticsearch_breakers_overhead&#123;breaker=&quot;in_flight_requests&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1</span><br><span class="line">elasticsearch_breakers_overhead&#123;breaker=&quot;parent&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1</span><br><span class="line">elasticsearch_breakers_overhead&#123;breaker=&quot;request&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1</span><br><span class="line"># HELP elasticsearch_breakers_tripped tripped for breaker</span><br><span class="line"># TYPE elasticsearch_breakers_tripped counter</span><br><span class="line">elasticsearch_breakers_tripped&#123;breaker=&quot;accounting&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line">elasticsearch_breakers_tripped&#123;breaker=&quot;fielddata&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line">elasticsearch_breakers_tripped&#123;breaker=&quot;in_flight_requests&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line">elasticsearch_breakers_tripped&#123;breaker=&quot;parent&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line">elasticsearch_breakers_tripped&#123;breaker=&quot;request&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_cluster_health_active_primary_shards The number of primary shards in your cluster. This is an aggregate total across all indices.</span><br><span class="line"># TYPE elasticsearch_cluster_health_active_primary_shards gauge</span><br><span class="line">elasticsearch_cluster_health_active_primary_shards&#123;cluster=&quot;powercloud_log&quot;&#125; 4236</span><br><span class="line"># HELP elasticsearch_cluster_health_active_shards Aggregate total of all shards across all indices, which includes replica shards.</span><br><span class="line"># TYPE elasticsearch_cluster_health_active_shards gauge</span><br><span class="line">elasticsearch_cluster_health_active_shards&#123;cluster=&quot;powercloud_log&quot;&#125; 4236</span><br><span class="line"># HELP elasticsearch_cluster_health_delayed_unassigned_shards Shards delayed to reduce reallocation overhead</span><br><span class="line"># TYPE elasticsearch_cluster_health_delayed_unassigned_shards gauge</span><br><span class="line">elasticsearch_cluster_health_delayed_unassigned_shards&#123;cluster=&quot;powercloud_log&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_cluster_health_initializing_shards Count of shards that are being freshly created.</span><br><span class="line"># TYPE elasticsearch_cluster_health_initializing_shards gauge</span><br><span class="line">elasticsearch_cluster_health_initializing_shards&#123;cluster=&quot;powercloud_log&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_cluster_health_json_parse_failures Number of errors while parsing JSON.</span><br><span class="line"># TYPE elasticsearch_cluster_health_json_parse_failures counter</span><br><span class="line">elasticsearch_cluster_health_json_parse_failures 0</span><br><span class="line"># HELP elasticsearch_cluster_health_number_of_data_nodes Number of data nodes in the cluster.</span><br><span class="line"># TYPE elasticsearch_cluster_health_number_of_data_nodes gauge</span><br><span class="line">elasticsearch_cluster_health_number_of_data_nodes&#123;cluster=&quot;powercloud_log&quot;&#125; 1</span><br><span class="line"># HELP elasticsearch_cluster_health_number_of_in_flight_fetch The number of ongoing shard info requests.</span><br><span class="line"># TYPE elasticsearch_cluster_health_number_of_in_flight_fetch gauge</span><br><span class="line">elasticsearch_cluster_health_number_of_in_flight_fetch&#123;cluster=&quot;powercloud_log&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_cluster_health_number_of_nodes Number of nodes in the cluster.</span><br><span class="line"># TYPE elasticsearch_cluster_health_number_of_nodes gauge</span><br><span class="line">elasticsearch_cluster_health_number_of_nodes&#123;cluster=&quot;powercloud_log&quot;&#125; 1</span><br><span class="line"># HELP elasticsearch_cluster_health_number_of_pending_tasks Cluster level changes which have not yet been executed</span><br><span class="line"># TYPE elasticsearch_cluster_health_number_of_pending_tasks gauge</span><br><span class="line">elasticsearch_cluster_health_number_of_pending_tasks&#123;cluster=&quot;powercloud_log&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_cluster_health_relocating_shards The number of shards that are currently moving from one node to another node.</span><br><span class="line"># TYPE elasticsearch_cluster_health_relocating_shards gauge</span><br><span class="line">elasticsearch_cluster_health_relocating_shards&#123;cluster=&quot;powercloud_log&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_cluster_health_status Whether all primary and replica shards are allocated.</span><br><span class="line"># TYPE elasticsearch_cluster_health_status gauge</span><br><span class="line">elasticsearch_cluster_health_status&#123;cluster=&quot;powercloud_log&quot;,color=&quot;green&quot;&#125; 1</span><br><span class="line">elasticsearch_cluster_health_status&#123;cluster=&quot;powercloud_log&quot;,color=&quot;red&quot;&#125; 0</span><br><span class="line">elasticsearch_cluster_health_status&#123;cluster=&quot;powercloud_log&quot;,color=&quot;yellow&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_cluster_health_task_max_waiting_in_queue_millis Tasks max time waiting in queue.</span><br><span class="line"># TYPE elasticsearch_cluster_health_task_max_waiting_in_queue_millis gauge</span><br><span class="line">elasticsearch_cluster_health_task_max_waiting_in_queue_millis&#123;cluster=&quot;powercloud_log&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_cluster_health_total_scrapes Current total ElasticSearch cluster health scrapes.</span><br><span class="line"># TYPE elasticsearch_cluster_health_total_scrapes counter</span><br><span class="line">elasticsearch_cluster_health_total_scrapes 86</span><br><span class="line"># HELP elasticsearch_cluster_health_unassigned_shards The number of shards that exist in the cluster state, but cannot be found in the cluster itself.</span><br><span class="line"># TYPE elasticsearch_cluster_health_unassigned_shards gauge</span><br><span class="line">elasticsearch_cluster_health_unassigned_shards&#123;cluster=&quot;powercloud_log&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_cluster_health_up Was the last scrape of the ElasticSearch cluster health endpoint successful.</span><br><span class="line"># TYPE elasticsearch_cluster_health_up gauge</span><br><span class="line">elasticsearch_cluster_health_up 1</span><br><span class="line"># HELP elasticsearch_clusterinfo_last_retrieval_failure_ts Timestamp of the last failed cluster info retrieval</span><br><span class="line"># TYPE elasticsearch_clusterinfo_last_retrieval_failure_ts gauge</span><br><span class="line">elasticsearch_clusterinfo_last_retrieval_failure_ts&#123;url=&quot;http://localhost:9200&quot;&#125; 1.641279194e+09</span><br><span class="line"># HELP elasticsearch_clusterinfo_last_retrieval_success_ts Timestamp of the last successful cluster info retrieval</span><br><span class="line"># TYPE elasticsearch_clusterinfo_last_retrieval_success_ts gauge</span><br><span class="line">elasticsearch_clusterinfo_last_retrieval_success_ts&#123;url=&quot;http://localhost:9200&quot;&#125; 1.641279789e+09</span><br><span class="line"># HELP elasticsearch_clusterinfo_up Up metric for the cluster info collector</span><br><span class="line"># TYPE elasticsearch_clusterinfo_up gauge</span><br><span class="line">elasticsearch_clusterinfo_up&#123;url=&quot;http://localhost:9200&quot;&#125; 1</span><br><span class="line"># HELP elasticsearch_clusterinfo_version_info Constant metric with ES version information as labels</span><br><span class="line"># TYPE elasticsearch_clusterinfo_version_info gauge</span><br><span class="line">elasticsearch_clusterinfo_version_info&#123;build_date=&quot;2020-10-16T09:09:46.555371Z&quot;,build_hash=&quot;be13c69&quot;,cluster=&quot;powercloud_log&quot;,cluster_uuid=&quot;YHZNY2gQRwSdApY_N5ZRGg&quot;,lucene_version=&quot;7.7.3&quot;,version=&quot;6.8.13&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_exporter_build_info A metric with a constant &#x27;1&#x27; value labeled by version, revision, branch, and goversion from which elasticsearch_exporter was built.</span><br><span class="line"># TYPE elasticsearch_exporter_build_info gauge</span><br><span class="line">elasticsearch_exporter_build_info&#123;branch=&quot;HEAD&quot;,goversion=&quot;go1.16.9&quot;,revision=&quot;5b2e5c7e0e5059c5e2c8046802fa59fb88b30773&quot;,version=&quot;1.3.0&quot;&#125; 1</span><br><span class="line"># HELP elasticsearch_filesystem_data_available_bytes Available space on block device in bytes</span><br><span class="line"># TYPE elasticsearch_filesystem_data_available_bytes gauge</span><br><span class="line">elasticsearch_filesystem_data_available_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,mount=&quot;/ (rootfs)&quot;,name=&quot;node-65&quot;,path=&quot;/mysql/es/nodes/0&quot;&#125; 7.907373056e+09</span><br><span class="line"># HELP elasticsearch_filesystem_data_free_bytes Free space on block device in bytes</span><br><span class="line"># TYPE elasticsearch_filesystem_data_free_bytes gauge</span><br><span class="line">elasticsearch_filesystem_data_free_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,mount=&quot;/ (rootfs)&quot;,name=&quot;node-65&quot;,path=&quot;/mysql/es/nodes/0&quot;&#125; 7.907373056e+09</span><br><span class="line"># HELP elasticsearch_filesystem_data_size_bytes Size of block device in bytes</span><br><span class="line"># TYPE elasticsearch_filesystem_data_size_bytes gauge</span><br><span class="line">elasticsearch_filesystem_data_size_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,mount=&quot;/ (rootfs)&quot;,name=&quot;node-65&quot;,path=&quot;/mysql/es/nodes/0&quot;&#125; 1.3407092736e+10</span><br><span class="line"># HELP elasticsearch_filesystem_io_stats_device_operations_count Count of disk operations</span><br><span class="line"># TYPE elasticsearch_filesystem_io_stats_device_operations_count counter</span><br><span class="line">elasticsearch_filesystem_io_stats_device_operations_count&#123;cluster=&quot;powercloud_log&quot;,device=&quot;dm-0&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 4.24902462e+08</span><br><span class="line"># HELP elasticsearch_filesystem_io_stats_device_read_operations_count Count of disk read operations</span><br><span class="line"># TYPE elasticsearch_filesystem_io_stats_device_read_operations_count counter</span><br><span class="line">elasticsearch_filesystem_io_stats_device_read_operations_count&#123;cluster=&quot;powercloud_log&quot;,device=&quot;dm-0&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 173739</span><br><span class="line"># HELP elasticsearch_filesystem_io_stats_device_read_size_kilobytes_sum Total kilobytes read from disk</span><br><span class="line"># TYPE elasticsearch_filesystem_io_stats_device_read_size_kilobytes_sum counter</span><br><span class="line">elasticsearch_filesystem_io_stats_device_read_size_kilobytes_sum&#123;cluster=&quot;powercloud_log&quot;,device=&quot;dm-0&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 5.766904e+06</span><br><span class="line"># HELP elasticsearch_filesystem_io_stats_device_write_operations_count Count of disk write operations</span><br><span class="line"># TYPE elasticsearch_filesystem_io_stats_device_write_operations_count counter</span><br><span class="line">elasticsearch_filesystem_io_stats_device_write_operations_count&#123;cluster=&quot;powercloud_log&quot;,device=&quot;dm-0&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 4.24728723e+08</span><br><span class="line"># HELP elasticsearch_filesystem_io_stats_device_write_size_kilobytes_sum Total kilobytes written to disk</span><br><span class="line"># TYPE elasticsearch_filesystem_io_stats_device_write_size_kilobytes_sum counter</span><br><span class="line">elasticsearch_filesystem_io_stats_device_write_size_kilobytes_sum&#123;cluster=&quot;powercloud_log&quot;,device=&quot;dm-0&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 3.996657082e+09</span><br><span class="line"># HELP elasticsearch_indices_completion_size_in_bytes Completion in bytes</span><br><span class="line"># TYPE elasticsearch_indices_completion_size_in_bytes counter</span><br><span class="line">elasticsearch_indices_completion_size_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_docs Count of documents on this node</span><br><span class="line"># TYPE elasticsearch_indices_docs gauge</span><br><span class="line">elasticsearch_indices_docs&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 3.844747e+06</span><br><span class="line"># HELP elasticsearch_indices_docs_deleted Count of deleted documents on this node</span><br><span class="line"># TYPE elasticsearch_indices_docs_deleted gauge</span><br><span class="line">elasticsearch_indices_docs_deleted&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 31972</span><br><span class="line"># HELP elasticsearch_indices_fielddata_evictions Evictions from field data</span><br><span class="line"># TYPE elasticsearch_indices_fielddata_evictions counter</span><br><span class="line">elasticsearch_indices_fielddata_evictions&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_fielddata_memory_size_bytes Field data cache memory usage in bytes</span><br><span class="line"># TYPE elasticsearch_indices_fielddata_memory_size_bytes gauge</span><br><span class="line">elasticsearch_indices_fielddata_memory_size_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 47232</span><br><span class="line"># HELP elasticsearch_indices_filter_cache_evictions Evictions from filter cache</span><br><span class="line"># TYPE elasticsearch_indices_filter_cache_evictions counter</span><br><span class="line">elasticsearch_indices_filter_cache_evictions&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_filter_cache_memory_size_bytes Filter cache memory usage in bytes</span><br><span class="line"># TYPE elasticsearch_indices_filter_cache_memory_size_bytes gauge</span><br><span class="line">elasticsearch_indices_filter_cache_memory_size_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_flush_time_seconds Cumulative flush time in seconds</span><br><span class="line"># TYPE elasticsearch_indices_flush_time_seconds counter</span><br><span class="line">elasticsearch_indices_flush_time_seconds&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1281.583</span><br><span class="line"># HELP elasticsearch_indices_flush_total Total flushes</span><br><span class="line"># TYPE elasticsearch_indices_flush_total counter</span><br><span class="line">elasticsearch_indices_flush_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 88700</span><br><span class="line"># HELP elasticsearch_indices_get_exists_time_seconds Total time get exists in seconds</span><br><span class="line"># TYPE elasticsearch_indices_get_exists_time_seconds counter</span><br><span class="line">elasticsearch_indices_get_exists_time_seconds&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 7334.63</span><br><span class="line"># HELP elasticsearch_indices_get_exists_total Total get exists operations</span><br><span class="line"># TYPE elasticsearch_indices_get_exists_total counter</span><br><span class="line">elasticsearch_indices_get_exists_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.09638173e+08</span><br><span class="line"># HELP elasticsearch_indices_get_missing_time_seconds Total time of get missing in seconds</span><br><span class="line"># TYPE elasticsearch_indices_get_missing_time_seconds counter</span><br><span class="line">elasticsearch_indices_get_missing_time_seconds&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.69</span><br><span class="line"># HELP elasticsearch_indices_get_missing_total Total get missing</span><br><span class="line"># TYPE elasticsearch_indices_get_missing_total counter</span><br><span class="line">elasticsearch_indices_get_missing_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 978</span><br><span class="line"># HELP elasticsearch_indices_get_time_seconds Total get time in seconds</span><br><span class="line"># TYPE elasticsearch_indices_get_time_seconds counter</span><br><span class="line">elasticsearch_indices_get_time_seconds&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 7336.32</span><br><span class="line"># HELP elasticsearch_indices_get_total Total get</span><br><span class="line"># TYPE elasticsearch_indices_get_total counter</span><br><span class="line">elasticsearch_indices_get_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.09639151e+08</span><br><span class="line"># HELP elasticsearch_indices_indexing_delete_time_seconds_total Total time indexing delete in seconds</span><br><span class="line"># TYPE elasticsearch_indices_indexing_delete_time_seconds_total counter</span><br><span class="line">elasticsearch_indices_indexing_delete_time_seconds_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_indexing_delete_total Total indexing deletes</span><br><span class="line"># TYPE elasticsearch_indices_indexing_delete_total counter</span><br><span class="line">elasticsearch_indices_indexing_delete_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_indexing_index_time_seconds_total Cumulative index time in seconds</span><br><span class="line"># TYPE elasticsearch_indices_indexing_index_time_seconds_total counter</span><br><span class="line">elasticsearch_indices_indexing_index_time_seconds_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 47008.786</span><br><span class="line"># HELP elasticsearch_indices_indexing_index_total Total index calls</span><br><span class="line"># TYPE elasticsearch_indices_indexing_index_total counter</span><br><span class="line">elasticsearch_indices_indexing_index_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 8.7126405e+07</span><br><span class="line"># HELP elasticsearch_indices_indexing_is_throttled Indexing throttling</span><br><span class="line"># TYPE elasticsearch_indices_indexing_is_throttled gauge</span><br><span class="line">elasticsearch_indices_indexing_is_throttled&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_indexing_throttle_time_seconds_total Cumulative indexing throttling time</span><br><span class="line"># TYPE elasticsearch_indices_indexing_throttle_time_seconds_total counter</span><br><span class="line">elasticsearch_indices_indexing_throttle_time_seconds_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_merges_current Current merges</span><br><span class="line"># TYPE elasticsearch_indices_merges_current gauge</span><br><span class="line">elasticsearch_indices_merges_current&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_merges_current_size_in_bytes Size of a current merges in bytes</span><br><span class="line"># TYPE elasticsearch_indices_merges_current_size_in_bytes gauge</span><br><span class="line">elasticsearch_indices_merges_current_size_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_merges_docs_total Cumulative docs merged</span><br><span class="line"># TYPE elasticsearch_indices_merges_docs_total counter</span><br><span class="line">elasticsearch_indices_merges_docs_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 5.91988704e+08</span><br><span class="line"># HELP elasticsearch_indices_merges_total Total merges</span><br><span class="line"># TYPE elasticsearch_indices_merges_total counter</span><br><span class="line">elasticsearch_indices_merges_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 2.595759e+06</span><br><span class="line"># HELP elasticsearch_indices_merges_total_size_bytes_total Total merge size in bytes</span><br><span class="line"># TYPE elasticsearch_indices_merges_total_size_bytes_total counter</span><br><span class="line">elasticsearch_indices_merges_total_size_bytes_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 2.77768194134e+11</span><br><span class="line"># HELP elasticsearch_indices_merges_total_throttled_time_seconds_total Total throttled time of merges in seconds</span><br><span class="line"># TYPE elasticsearch_indices_merges_total_throttled_time_seconds_total counter</span><br><span class="line">elasticsearch_indices_merges_total_throttled_time_seconds_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_merges_total_time_seconds_total Total time spent merging in seconds</span><br><span class="line"># TYPE elasticsearch_indices_merges_total_time_seconds_total counter</span><br><span class="line">elasticsearch_indices_merges_total_time_seconds_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 13919.644</span><br><span class="line"># HELP elasticsearch_indices_query_cache_cache_size Query cache cache size</span><br><span class="line"># TYPE elasticsearch_indices_query_cache_cache_size gauge</span><br><span class="line">elasticsearch_indices_query_cache_cache_size&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_query_cache_cache_total Query cache cache count</span><br><span class="line"># TYPE elasticsearch_indices_query_cache_cache_total counter</span><br><span class="line">elasticsearch_indices_query_cache_cache_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_query_cache_count Query cache count</span><br><span class="line"># TYPE elasticsearch_indices_query_cache_count counter</span><br><span class="line">elasticsearch_indices_query_cache_count&#123;cache=&quot;hit&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_query_cache_evictions Evictions from query cache</span><br><span class="line"># TYPE elasticsearch_indices_query_cache_evictions counter</span><br><span class="line">elasticsearch_indices_query_cache_evictions&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_query_cache_memory_size_bytes Query cache memory usage in bytes</span><br><span class="line"># TYPE elasticsearch_indices_query_cache_memory_size_bytes gauge</span><br><span class="line">elasticsearch_indices_query_cache_memory_size_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_query_cache_total Query cache total count</span><br><span class="line"># TYPE elasticsearch_indices_query_cache_total counter</span><br><span class="line">elasticsearch_indices_query_cache_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_query_miss_count Query miss count</span><br><span class="line"># TYPE elasticsearch_indices_query_miss_count counter</span><br><span class="line">elasticsearch_indices_query_miss_count&#123;cache=&quot;miss&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_refresh_time_seconds_total Total time spent refreshing in seconds</span><br><span class="line"># TYPE elasticsearch_indices_refresh_time_seconds_total counter</span><br><span class="line">elasticsearch_indices_refresh_time_seconds_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 321386.712</span><br><span class="line"># HELP elasticsearch_indices_refresh_total Total refreshes</span><br><span class="line"># TYPE elasticsearch_indices_refresh_total counter</span><br><span class="line">elasticsearch_indices_refresh_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 6.0047433e+07</span><br><span class="line"># HELP elasticsearch_indices_request_cache_count Request cache count</span><br><span class="line"># TYPE elasticsearch_indices_request_cache_count counter</span><br><span class="line">elasticsearch_indices_request_cache_count&#123;cache=&quot;hit&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 959</span><br><span class="line"># HELP elasticsearch_indices_request_cache_evictions Evictions from request cache</span><br><span class="line"># TYPE elasticsearch_indices_request_cache_evictions counter</span><br><span class="line">elasticsearch_indices_request_cache_evictions&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_request_cache_memory_size_bytes Request cache memory usage in bytes</span><br><span class="line"># TYPE elasticsearch_indices_request_cache_memory_size_bytes gauge</span><br><span class="line">elasticsearch_indices_request_cache_memory_size_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 97920</span><br><span class="line"># HELP elasticsearch_indices_request_miss_count Request miss count</span><br><span class="line"># TYPE elasticsearch_indices_request_miss_count counter</span><br><span class="line">elasticsearch_indices_request_miss_count&#123;cache=&quot;miss&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 2431</span><br><span class="line"># HELP elasticsearch_indices_search_fetch_time_seconds Total search fetch time in seconds</span><br><span class="line"># TYPE elasticsearch_indices_search_fetch_time_seconds counter</span><br><span class="line">elasticsearch_indices_search_fetch_time_seconds&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 235.096</span><br><span class="line"># HELP elasticsearch_indices_search_fetch_total Total number of fetches</span><br><span class="line"># TYPE elasticsearch_indices_search_fetch_total counter</span><br><span class="line">elasticsearch_indices_search_fetch_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 7.892078e+06</span><br><span class="line"># HELP elasticsearch_indices_search_query_time_seconds Total search query time in seconds</span><br><span class="line"># TYPE elasticsearch_indices_search_query_time_seconds counter</span><br><span class="line">elasticsearch_indices_search_query_time_seconds&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 44106.837</span><br><span class="line"># HELP elasticsearch_indices_search_query_total Total number of queries</span><br><span class="line"># TYPE elasticsearch_indices_search_query_total counter</span><br><span class="line">elasticsearch_indices_search_query_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 7.52018903e+08</span><br><span class="line"># HELP elasticsearch_indices_search_scroll_time_seconds Total scroll time in seconds</span><br><span class="line"># TYPE elasticsearch_indices_search_scroll_time_seconds counter</span><br><span class="line">elasticsearch_indices_search_scroll_time_seconds&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_search_scroll_total Total number of scrolls</span><br><span class="line"># TYPE elasticsearch_indices_search_scroll_total counter</span><br><span class="line">elasticsearch_indices_search_scroll_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_search_suggest_time_seconds Total suggest time in seconds</span><br><span class="line"># TYPE elasticsearch_indices_search_suggest_time_seconds counter</span><br><span class="line">elasticsearch_indices_search_suggest_time_seconds&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_search_suggest_total Total number of suggests</span><br><span class="line"># TYPE elasticsearch_indices_search_suggest_total counter</span><br><span class="line">elasticsearch_indices_search_suggest_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_segments_count Count of index segments on this node</span><br><span class="line"># TYPE elasticsearch_indices_segments_count gauge</span><br><span class="line">elasticsearch_indices_segments_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 25317</span><br><span class="line"># HELP elasticsearch_indices_segments_doc_values_memory_in_bytes Count of doc values memory</span><br><span class="line"># TYPE elasticsearch_indices_segments_doc_values_memory_in_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_doc_values_memory_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 6.907292e+06</span><br><span class="line"># HELP elasticsearch_indices_segments_fixed_bit_set_memory_in_bytes Count of fixed bit set</span><br><span class="line"># TYPE elasticsearch_indices_segments_fixed_bit_set_memory_in_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_fixed_bit_set_memory_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_segments_index_writer_memory_in_bytes Count of memory for index writer on this node</span><br><span class="line"># TYPE elasticsearch_indices_segments_index_writer_memory_in_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_index_writer_memory_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 2.0151996e+07</span><br><span class="line"># HELP elasticsearch_indices_segments_memory_bytes Current memory size of segments in bytes</span><br><span class="line"># TYPE elasticsearch_indices_segments_memory_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_memory_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 3.1915479e+07</span><br><span class="line"># HELP elasticsearch_indices_segments_norms_memory_in_bytes Count of memory used by norms</span><br><span class="line"># TYPE elasticsearch_indices_segments_norms_memory_in_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_norms_memory_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 669440</span><br><span class="line"># HELP elasticsearch_indices_segments_points_memory_in_bytes Point values memory usage in bytes</span><br><span class="line"># TYPE elasticsearch_indices_segments_points_memory_in_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_points_memory_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 268735</span><br><span class="line"># HELP elasticsearch_indices_segments_stored_fields_memory_in_bytes Count of stored fields memory</span><br><span class="line"># TYPE elasticsearch_indices_segments_stored_fields_memory_in_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_stored_fields_memory_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 7.991504e+06</span><br><span class="line"># HELP elasticsearch_indices_segments_term_vectors_memory_in_bytes Term vectors memory usage in bytes</span><br><span class="line"># TYPE elasticsearch_indices_segments_term_vectors_memory_in_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_term_vectors_memory_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_segments_terms_memory_in_bytes Count of terms in memory for this node</span><br><span class="line"># TYPE elasticsearch_indices_segments_terms_memory_in_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_terms_memory_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.6078508e+07</span><br><span class="line"># HELP elasticsearch_indices_segments_version_map_memory_in_bytes Version map memory usage in bytes</span><br><span class="line"># TYPE elasticsearch_indices_segments_version_map_memory_in_bytes gauge</span><br><span class="line">elasticsearch_indices_segments_version_map_memory_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 12348</span><br><span class="line"># HELP elasticsearch_indices_store_size_bytes Current size of stored index data in bytes</span><br><span class="line"># TYPE elasticsearch_indices_store_size_bytes gauge</span><br><span class="line">elasticsearch_indices_store_size_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 6.10025718e+08</span><br><span class="line"># HELP elasticsearch_indices_store_throttle_time_seconds_total Throttle time for index store in seconds</span><br><span class="line"># TYPE elasticsearch_indices_store_throttle_time_seconds_total counter</span><br><span class="line">elasticsearch_indices_store_throttle_time_seconds_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_indices_translog_operations Total translog operations</span><br><span class="line"># TYPE elasticsearch_indices_translog_operations counter</span><br><span class="line">elasticsearch_indices_translog_operations&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 3.788237e+06</span><br><span class="line"># HELP elasticsearch_indices_translog_size_in_bytes Total translog size in bytes</span><br><span class="line"># TYPE elasticsearch_indices_translog_size_in_bytes counter</span><br><span class="line">elasticsearch_indices_translog_size_in_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.161283492e+09</span><br><span class="line"># HELP elasticsearch_indices_warmer_time_seconds_total Total warmer time in seconds</span><br><span class="line"># TYPE elasticsearch_indices_warmer_time_seconds_total counter</span><br><span class="line">elasticsearch_indices_warmer_time_seconds_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 766.68</span><br><span class="line"># HELP elasticsearch_indices_warmer_total Total warmer count</span><br><span class="line"># TYPE elasticsearch_indices_warmer_total counter</span><br><span class="line">elasticsearch_indices_warmer_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 5.1882607e+07</span><br><span class="line"># HELP elasticsearch_jvm_buffer_pool_used_bytes JVM buffer currently used</span><br><span class="line"># TYPE elasticsearch_jvm_buffer_pool_used_bytes gauge</span><br><span class="line">elasticsearch_jvm_buffer_pool_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;direct&quot;&#125; 1.35439297e+08</span><br><span class="line">elasticsearch_jvm_buffer_pool_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;mapped&quot;&#125; 5.61244239e+08</span><br><span class="line"># HELP elasticsearch_jvm_gc_collection_seconds_count Count of JVM GC runs</span><br><span class="line"># TYPE elasticsearch_jvm_gc_collection_seconds_count counter</span><br><span class="line">elasticsearch_jvm_gc_collection_seconds_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,gc=&quot;old&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 349475</span><br><span class="line">elasticsearch_jvm_gc_collection_seconds_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,gc=&quot;young&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.310973e+06</span><br><span class="line"># HELP elasticsearch_jvm_gc_collection_seconds_sum GC run time in seconds</span><br><span class="line"># TYPE elasticsearch_jvm_gc_collection_seconds_sum counter</span><br><span class="line">elasticsearch_jvm_gc_collection_seconds_sum&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,gc=&quot;old&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 29972.916</span><br><span class="line">elasticsearch_jvm_gc_collection_seconds_sum&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,gc=&quot;young&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 35169.164</span><br><span class="line"># HELP elasticsearch_jvm_memory_committed_bytes JVM memory currently committed by area</span><br><span class="line"># TYPE elasticsearch_jvm_memory_committed_bytes gauge</span><br><span class="line">elasticsearch_jvm_memory_committed_bytes&#123;area=&quot;heap&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 2.112618496e+09</span><br><span class="line">elasticsearch_jvm_memory_committed_bytes&#123;area=&quot;non-heap&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.94031616e+08</span><br><span class="line"># HELP elasticsearch_jvm_memory_max_bytes JVM memory max</span><br><span class="line"># TYPE elasticsearch_jvm_memory_max_bytes gauge</span><br><span class="line">elasticsearch_jvm_memory_max_bytes&#123;area=&quot;heap&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 2.112618496e+09</span><br><span class="line"># HELP elasticsearch_jvm_memory_pool_max_bytes JVM memory max by pool</span><br><span class="line"># TYPE elasticsearch_jvm_memory_pool_max_bytes counter</span><br><span class="line">elasticsearch_jvm_memory_pool_max_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;old&quot;&#125; 1.798569984e+09</span><br><span class="line">elasticsearch_jvm_memory_pool_max_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;survivor&quot;&#125; 3.4865152e+07</span><br><span class="line">elasticsearch_jvm_memory_pool_max_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;young&quot;&#125; 2.7918336e+08</span><br><span class="line"># HELP elasticsearch_jvm_memory_pool_peak_max_bytes JVM memory peak max by pool</span><br><span class="line"># TYPE elasticsearch_jvm_memory_pool_peak_max_bytes counter</span><br><span class="line">elasticsearch_jvm_memory_pool_peak_max_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;old&quot;&#125; 1.798569984e+09</span><br><span class="line">elasticsearch_jvm_memory_pool_peak_max_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;survivor&quot;&#125; 3.4865152e+07</span><br><span class="line">elasticsearch_jvm_memory_pool_peak_max_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;young&quot;&#125; 2.7918336e+08</span><br><span class="line"># HELP elasticsearch_jvm_memory_pool_peak_used_bytes JVM memory peak used by pool</span><br><span class="line"># TYPE elasticsearch_jvm_memory_pool_peak_used_bytes counter</span><br><span class="line">elasticsearch_jvm_memory_pool_peak_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;old&quot;&#125; 1.79310328e+09</span><br><span class="line">elasticsearch_jvm_memory_pool_peak_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;survivor&quot;&#125; 3.4865152e+07</span><br><span class="line">elasticsearch_jvm_memory_pool_peak_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;young&quot;&#125; 2.7918336e+08</span><br><span class="line"># HELP elasticsearch_jvm_memory_pool_used_bytes JVM memory currently used by pool</span><br><span class="line"># TYPE elasticsearch_jvm_memory_pool_used_bytes gauge</span><br><span class="line">elasticsearch_jvm_memory_pool_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;old&quot;&#125; 1.749747304e+09</span><br><span class="line">elasticsearch_jvm_memory_pool_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;survivor&quot;&#125; 2.7390528e+07</span><br><span class="line">elasticsearch_jvm_memory_pool_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,pool=&quot;young&quot;&#125; 2.570478e+08</span><br><span class="line"># HELP elasticsearch_jvm_memory_used_bytes JVM memory currently used by area</span><br><span class="line"># TYPE elasticsearch_jvm_memory_used_bytes gauge</span><br><span class="line">elasticsearch_jvm_memory_used_bytes&#123;area=&quot;heap&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 2.034185632e+09</span><br><span class="line">elasticsearch_jvm_memory_used_bytes&#123;area=&quot;non-heap&quot;,cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.80895256e+08</span><br><span class="line"># HELP elasticsearch_node_stats_json_parse_failures Number of errors while parsing JSON.</span><br><span class="line"># TYPE elasticsearch_node_stats_json_parse_failures counter</span><br><span class="line">elasticsearch_node_stats_json_parse_failures 0</span><br><span class="line"># HELP elasticsearch_node_stats_total_scrapes Current total ElasticSearch node scrapes.</span><br><span class="line"># TYPE elasticsearch_node_stats_total_scrapes counter</span><br><span class="line">elasticsearch_node_stats_total_scrapes 86</span><br><span class="line"># HELP elasticsearch_node_stats_up Was the last scrape of the ElasticSearch nodes endpoint successful.</span><br><span class="line"># TYPE elasticsearch_node_stats_up gauge</span><br><span class="line">elasticsearch_node_stats_up 1</span><br><span class="line"># HELP elasticsearch_nodes_roles Node roles</span><br><span class="line"># TYPE elasticsearch_nodes_roles gauge</span><br><span class="line">elasticsearch_nodes_roles&#123;cluster=&quot;powercloud_log&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,role=&quot;client&quot;&#125; 1</span><br><span class="line">elasticsearch_nodes_roles&#123;cluster=&quot;powercloud_log&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,role=&quot;data&quot;&#125; 1</span><br><span class="line">elasticsearch_nodes_roles&#123;cluster=&quot;powercloud_log&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,role=&quot;ingest&quot;&#125; 1</span><br><span class="line">elasticsearch_nodes_roles&#123;cluster=&quot;powercloud_log&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,role=&quot;master&quot;&#125; 1</span><br><span class="line"># HELP elasticsearch_os_cpu_percent Percent CPU used by OS</span><br><span class="line"># TYPE elasticsearch_os_cpu_percent gauge</span><br><span class="line">elasticsearch_os_cpu_percent&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 25</span><br><span class="line"># HELP elasticsearch_os_load1 Shortterm load average</span><br><span class="line"># TYPE elasticsearch_os_load1 gauge</span><br><span class="line">elasticsearch_os_load1&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0.47</span><br><span class="line"># HELP elasticsearch_os_load15 Longterm load average</span><br><span class="line"># TYPE elasticsearch_os_load15 gauge</span><br><span class="line">elasticsearch_os_load15&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 1.04</span><br><span class="line"># HELP elasticsearch_os_load5 Midterm load average</span><br><span class="line"># TYPE elasticsearch_os_load5 gauge</span><br><span class="line">elasticsearch_os_load5&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0.91</span><br><span class="line"># HELP elasticsearch_os_mem_actual_free_bytes Amount of free physical memory in bytes</span><br><span class="line"># TYPE elasticsearch_os_mem_actual_free_bytes gauge</span><br><span class="line">elasticsearch_os_mem_actual_free_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_os_mem_actual_used_bytes Amount of used physical memory in bytes</span><br><span class="line"># TYPE elasticsearch_os_mem_actual_used_bytes gauge</span><br><span class="line">elasticsearch_os_mem_actual_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_os_mem_free_bytes Amount of free physical memory in bytes</span><br><span class="line"># TYPE elasticsearch_os_mem_free_bytes gauge</span><br><span class="line">elasticsearch_os_mem_free_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 4.4890112e+08</span><br><span class="line"># HELP elasticsearch_os_mem_used_bytes Amount of used physical memory in bytes</span><br><span class="line"># TYPE elasticsearch_os_mem_used_bytes gauge</span><br><span class="line">elasticsearch_os_mem_used_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 7.752511488e+09</span><br><span class="line"># HELP elasticsearch_process_cpu_percent Percent CPU used by process</span><br><span class="line"># TYPE elasticsearch_process_cpu_percent gauge</span><br><span class="line">elasticsearch_process_cpu_percent&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 11</span><br><span class="line"># HELP elasticsearch_process_cpu_time_seconds_sum Process CPU time in seconds</span><br><span class="line"># TYPE elasticsearch_process_cpu_time_seconds_sum counter</span><br><span class="line">elasticsearch_process_cpu_time_seconds_sum&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;sys&quot;&#125; 0</span><br><span class="line">elasticsearch_process_cpu_time_seconds_sum&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;total&quot;&#125; 3.33384018e+06</span><br><span class="line">elasticsearch_process_cpu_time_seconds_sum&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;user&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_process_max_files_descriptors Max file descriptors</span><br><span class="line"># TYPE elasticsearch_process_max_files_descriptors gauge</span><br><span class="line">elasticsearch_process_max_files_descriptors&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 131072</span><br><span class="line"># HELP elasticsearch_process_mem_resident_size_bytes Resident memory in use by process in bytes</span><br><span class="line"># TYPE elasticsearch_process_mem_resident_size_bytes gauge</span><br><span class="line">elasticsearch_process_mem_resident_size_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_process_mem_share_size_bytes Shared memory in use by process in bytes</span><br><span class="line"># TYPE elasticsearch_process_mem_share_size_bytes gauge</span><br><span class="line">elasticsearch_process_mem_share_size_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_process_mem_virtual_size_bytes Total virtual memory used in bytes</span><br><span class="line"># TYPE elasticsearch_process_mem_virtual_size_bytes gauge</span><br><span class="line">elasticsearch_process_mem_virtual_size_bytes&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 7.020691456e+09</span><br><span class="line"># HELP elasticsearch_process_open_files_count Open file descriptors</span><br><span class="line"># TYPE elasticsearch_process_open_files_count gauge</span><br><span class="line">elasticsearch_process_open_files_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 9494</span><br><span class="line"># HELP elasticsearch_thread_pool_active_count Thread Pool threads active</span><br><span class="line"># TYPE elasticsearch_thread_pool_active_count gauge</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;analyze&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ccr&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_started&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_store&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;flush&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;force_merge&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;generic&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;get&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;index&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;listener&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;management&quot;&#125; 1</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_autodetect&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_datafeed&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_utility&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;refresh&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;rollup_indexing&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search_throttled&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;security-token-key&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;snapshot&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;warmer&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;watcher&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_active_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;write&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_thread_pool_completed_count Thread Pool operations completed</span><br><span class="line"># TYPE elasticsearch_thread_pool_completed_count counter</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;analyze&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ccr&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_started&quot;&#125; 364</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_store&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;flush&quot;&#125; 177298</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;force_merge&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;generic&quot;&#125; 4.17230997e+08</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;get&quot;&#125; 2.8834648e+07</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;index&quot;&#125; 2.8825882e+07</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;listener&quot;&#125; 2.7632481e+07</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;management&quot;&#125; 3.89357528e+08</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_autodetect&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_datafeed&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_utility&quot;&#125; 607</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;refresh&quot;&#125; 6.07410367e+08</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;rollup_indexing&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search&quot;&#125; 7.75406281e+08</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search_throttled&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;security-token-key&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;snapshot&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;warmer&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;watcher&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_completed_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;write&quot;&#125; 6.7644324e+07</span><br><span class="line"># HELP elasticsearch_thread_pool_largest_count Thread Pool largest threads count</span><br><span class="line"># TYPE elasticsearch_thread_pool_largest_count gauge</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;analyze&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ccr&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_started&quot;&#125; 8</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_store&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;flush&quot;&#125; 2</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;force_merge&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;generic&quot;&#125; 128</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;get&quot;&#125; 4</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;index&quot;&#125; 4</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;listener&quot;&#125; 2</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;management&quot;&#125; 5</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_autodetect&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_datafeed&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_utility&quot;&#125; 80</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;refresh&quot;&#125; 2</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;rollup_indexing&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search&quot;&#125; 7</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search_throttled&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;security-token-key&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;snapshot&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;warmer&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;watcher&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_largest_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;write&quot;&#125; 4</span><br><span class="line"># HELP elasticsearch_thread_pool_queue_count Thread Pool operations queued</span><br><span class="line"># TYPE elasticsearch_thread_pool_queue_count gauge</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;analyze&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ccr&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_started&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_store&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;flush&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;force_merge&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;generic&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;get&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;index&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;listener&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;management&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_autodetect&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_datafeed&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_utility&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;refresh&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;rollup_indexing&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search_throttled&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;security-token-key&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;snapshot&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;warmer&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;watcher&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_queue_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;write&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_thread_pool_rejected_count Thread Pool operations rejected</span><br><span class="line"># TYPE elasticsearch_thread_pool_rejected_count counter</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;analyze&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ccr&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_started&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_store&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;flush&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;force_merge&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;generic&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;get&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;index&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;listener&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;management&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_autodetect&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_datafeed&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_utility&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;refresh&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;rollup_indexing&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search_throttled&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;security-token-key&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;snapshot&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;warmer&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;watcher&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_rejected_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;write&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_thread_pool_threads_count Thread Pool current threads count</span><br><span class="line"># TYPE elasticsearch_thread_pool_threads_count gauge</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;analyze&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ccr&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_started&quot;&#125; 1</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;fetch_shard_store&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;flush&quot;&#125; 2</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;force_merge&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;generic&quot;&#125; 128</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;get&quot;&#125; 4</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;index&quot;&#125; 4</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;listener&quot;&#125; 2</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;management&quot;&#125; 5</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_autodetect&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_datafeed&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;ml_utility&quot;&#125; 80</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;refresh&quot;&#125; 2</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;rollup_indexing&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search&quot;&#125; 7</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;search_throttled&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;security-token-key&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;snapshot&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;warmer&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;watcher&quot;&#125; 0</span><br><span class="line">elasticsearch_thread_pool_threads_count&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;,type=&quot;write&quot;&#125; 4</span><br><span class="line"># HELP elasticsearch_transport_rx_packets_total Count of packets received</span><br><span class="line"># TYPE elasticsearch_transport_rx_packets_total counter</span><br><span class="line">elasticsearch_transport_rx_packets_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_transport_rx_size_bytes_total Total number of bytes received</span><br><span class="line"># TYPE elasticsearch_transport_rx_size_bytes_total counter</span><br><span class="line">elasticsearch_transport_rx_size_bytes_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_transport_tx_packets_total Count of packets sent</span><br><span class="line"># TYPE elasticsearch_transport_tx_packets_total counter</span><br><span class="line">elasticsearch_transport_tx_packets_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP elasticsearch_transport_tx_size_bytes_total Total number of bytes sent</span><br><span class="line"># TYPE elasticsearch_transport_tx_size_bytes_total counter</span><br><span class="line">elasticsearch_transport_tx_size_bytes_total&#123;cluster=&quot;powercloud_log&quot;,es_client_node=&quot;true&quot;,es_data_node=&quot;true&quot;,es_ingest_node=&quot;true&quot;,es_master_node=&quot;true&quot;,host=&quot;172.18.40.65&quot;,name=&quot;node-65&quot;&#125; 0</span><br><span class="line"># HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.</span><br><span class="line"># TYPE go_gc_duration_seconds summary</span><br><span class="line">go_gc_duration_seconds&#123;quantile=&quot;0&quot;&#125; 3.6794e-05</span><br><span class="line">go_gc_duration_seconds&#123;quantile=&quot;0.25&quot;&#125; 6.2783e-05</span><br><span class="line">go_gc_duration_seconds&#123;quantile=&quot;0.5&quot;&#125; 8.6707e-05</span><br><span class="line">go_gc_duration_seconds&#123;quantile=&quot;0.75&quot;&#125; 0.00011003</span><br><span class="line">go_gc_duration_seconds&#123;quantile=&quot;1&quot;&#125; 0.015864101</span><br><span class="line">go_gc_duration_seconds_sum 0.02416966</span><br><span class="line">go_gc_duration_seconds_count 40</span><br><span class="line"># HELP go_goroutines Number of goroutines that currently exist.</span><br><span class="line"># TYPE go_goroutines gauge</span><br><span class="line">go_goroutines 19</span><br><span class="line"># HELP go_info Information about the Go environment.</span><br><span class="line"># TYPE go_info gauge</span><br><span class="line">go_info&#123;version=&quot;go1.16.9&quot;&#125; 1</span><br><span class="line"># HELP go_memstats_alloc_bytes Number of bytes allocated and still in use.</span><br><span class="line"># TYPE go_memstats_alloc_bytes gauge</span><br><span class="line">go_memstats_alloc_bytes 3.887952e+06</span><br><span class="line"># HELP go_memstats_alloc_bytes_total Total number of bytes allocated, even if freed.</span><br><span class="line"># TYPE go_memstats_alloc_bytes_total counter</span><br><span class="line">go_memstats_alloc_bytes_total 9.1755768e+07</span><br><span class="line"># HELP go_memstats_buck_hash_sys_bytes Number of bytes used by the profiling bucket hash table.</span><br><span class="line"># TYPE go_memstats_buck_hash_sys_bytes gauge</span><br><span class="line">go_memstats_buck_hash_sys_bytes 1.458561e+06</span><br><span class="line"># HELP go_memstats_frees_total Total number of frees.</span><br><span class="line"># TYPE go_memstats_frees_total counter</span><br><span class="line">go_memstats_frees_total 884448</span><br><span class="line"># HELP go_memstats_gc_cpu_fraction The fraction of this program&#x27;s available CPU time used by the GC since the program started.</span><br><span class="line"># TYPE go_memstats_gc_cpu_fraction gauge</span><br><span class="line">go_memstats_gc_cpu_fraction 2.339386189125989e-05</span><br><span class="line"># HELP go_memstats_gc_sys_bytes Number of bytes used for garbage collection system metadata.</span><br><span class="line"># TYPE go_memstats_gc_sys_bytes gauge</span><br><span class="line">go_memstats_gc_sys_bytes 5.026296e+06</span><br><span class="line"># HELP go_memstats_heap_alloc_bytes Number of heap bytes allocated and still in use.</span><br><span class="line"># TYPE go_memstats_heap_alloc_bytes gauge</span><br><span class="line">go_memstats_heap_alloc_bytes 3.887952e+06</span><br><span class="line"># HELP go_memstats_heap_idle_bytes Number of heap bytes waiting to be used.</span><br><span class="line"># TYPE go_memstats_heap_idle_bytes gauge</span><br><span class="line">go_memstats_heap_idle_bytes 6.1202432e+07</span><br><span class="line"># HELP go_memstats_heap_inuse_bytes Number of heap bytes that are in use.</span><br><span class="line"># TYPE go_memstats_heap_inuse_bytes gauge</span><br><span class="line">go_memstats_heap_inuse_bytes 5.185536e+06</span><br><span class="line"># HELP go_memstats_heap_objects Number of allocated objects.</span><br><span class="line"># TYPE go_memstats_heap_objects gauge</span><br><span class="line">go_memstats_heap_objects 16097</span><br><span class="line"># HELP go_memstats_heap_released_bytes Number of heap bytes released to OS.</span><br><span class="line"># TYPE go_memstats_heap_released_bytes gauge</span><br><span class="line">go_memstats_heap_released_bytes 6.0555264e+07</span><br><span class="line"># HELP go_memstats_heap_sys_bytes Number of heap bytes obtained from system.</span><br><span class="line"># TYPE go_memstats_heap_sys_bytes gauge</span><br><span class="line">go_memstats_heap_sys_bytes 6.6387968e+07</span><br><span class="line"># HELP go_memstats_last_gc_time_seconds Number of seconds since 1970 of last garbage collection.</span><br><span class="line"># TYPE go_memstats_last_gc_time_seconds gauge</span><br><span class="line">go_memstats_last_gc_time_seconds 1.6412798140310771e+09</span><br><span class="line"># HELP go_memstats_lookups_total Total number of pointer lookups.</span><br><span class="line"># TYPE go_memstats_lookups_total counter</span><br><span class="line">go_memstats_lookups_total 0</span><br><span class="line"># HELP go_memstats_mallocs_total Total number of mallocs.</span><br><span class="line"># TYPE go_memstats_mallocs_total counter</span><br><span class="line">go_memstats_mallocs_total 900545</span><br><span class="line"># HELP go_memstats_mcache_inuse_bytes Number of bytes in use by mcache structures.</span><br><span class="line"># TYPE go_memstats_mcache_inuse_bytes gauge</span><br><span class="line">go_memstats_mcache_inuse_bytes 4800</span><br><span class="line"># HELP go_memstats_mcache_sys_bytes Number of bytes used for mcache structures obtained from system.</span><br><span class="line"># TYPE go_memstats_mcache_sys_bytes gauge</span><br><span class="line">go_memstats_mcache_sys_bytes 16384</span><br><span class="line"># HELP go_memstats_mspan_inuse_bytes Number of bytes in use by mspan structures.</span><br><span class="line"># TYPE go_memstats_mspan_inuse_bytes gauge</span><br><span class="line">go_memstats_mspan_inuse_bytes 84456</span><br><span class="line"># HELP go_memstats_mspan_sys_bytes Number of bytes used for mspan structures obtained from system.</span><br><span class="line"># TYPE go_memstats_mspan_sys_bytes gauge</span><br><span class="line">go_memstats_mspan_sys_bytes 98304</span><br><span class="line"># HELP go_memstats_next_gc_bytes Number of heap bytes when next garbage collection will take place.</span><br><span class="line"># TYPE go_memstats_next_gc_bytes gauge</span><br><span class="line">go_memstats_next_gc_bytes 5.69084e+06</span><br><span class="line"># HELP go_memstats_other_sys_bytes Number of bytes used for other system allocations.</span><br><span class="line"># TYPE go_memstats_other_sys_bytes gauge</span><br><span class="line">go_memstats_other_sys_bytes 856207</span><br><span class="line"># HELP go_memstats_stack_inuse_bytes Number of bytes in use by the stack allocator.</span><br><span class="line"># TYPE go_memstats_stack_inuse_bytes gauge</span><br><span class="line">go_memstats_stack_inuse_bytes 688128</span><br><span class="line"># HELP go_memstats_stack_sys_bytes Number of bytes obtained from system for stack allocator.</span><br><span class="line"># TYPE go_memstats_stack_sys_bytes gauge</span><br><span class="line">go_memstats_stack_sys_bytes 688128</span><br><span class="line"># HELP go_memstats_sys_bytes Number of bytes obtained from system.</span><br><span class="line"># TYPE go_memstats_sys_bytes gauge</span><br><span class="line">go_memstats_sys_bytes 7.4531848e+07</span><br><span class="line"># HELP go_threads Number of OS threads created.</span><br><span class="line"># TYPE go_threads gauge</span><br><span class="line">go_threads 9</span><br><span class="line"># HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.</span><br><span class="line"># TYPE process_cpu_seconds_total counter</span><br><span class="line">process_cpu_seconds_total 0.87</span><br><span class="line"># HELP process_max_fds Maximum number of open file descriptors.</span><br><span class="line"># TYPE process_max_fds gauge</span><br><span class="line">process_max_fds 131072</span><br><span class="line"># HELP process_open_fds Number of open file descriptors.</span><br><span class="line"># TYPE process_open_fds gauge</span><br><span class="line">process_open_fds 13</span><br><span class="line"># HELP process_resident_memory_bytes Resident memory size in bytes.</span><br><span class="line"># TYPE process_resident_memory_bytes gauge</span><br><span class="line">process_resident_memory_bytes 1.5499264e+07</span><br><span class="line"># HELP process_start_time_seconds Start time of the process since unix epoch in seconds.</span><br><span class="line"># TYPE process_start_time_seconds gauge</span><br><span class="line">process_start_time_seconds 1.64127828876e+09</span><br><span class="line"># HELP process_virtual_memory_bytes Virtual memory size in bytes.</span><br><span class="line"># TYPE process_virtual_memory_bytes gauge</span><br><span class="line">process_virtual_memory_bytes 7.31824128e+08</span><br><span class="line"># HELP process_virtual_memory_max_bytes Maximum amount of virtual memory available in bytes.</span><br><span class="line"># TYPE process_virtual_memory_max_bytes gauge</span><br><span class="line">process_virtual_memory_max_bytes 1.8446744073709552e+19</span><br><span class="line"># HELP promhttp_metric_handler_requests_in_flight Current number of scrapes being served.</span><br><span class="line"># TYPE promhttp_metric_handler_requests_in_flight gauge</span><br><span class="line">promhttp_metric_handler_requests_in_flight 1</span><br><span class="line"># HELP promhttp_metric_handler_requests_total Total number of scrapes by HTTP status code.</span><br><span class="line"># TYPE promhttp_metric_handler_requests_total counter</span><br><span class="line">promhttp_metric_handler_requests_total&#123;code=&quot;200&quot;&#125; 85</span><br><span class="line">promhttp_metric_handler_requests_total&#123;code=&quot;500&quot;&#125; 0</span><br><span class="line">promhttp_metric_handler_requests_total&#123;code=&quot;503&quot;&#125; 0</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qi-zou.github.io/2022/01/06/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/me/images/avatar.gif">
      <meta itemprop="name" content="niuwa">
      <meta itemprop="description" content="整理和记录所思所想">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛蛙">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/me/2022/01/06/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-01-06 12:04:34" itemprop="dateCreated datePublished" datetime="2022-01-06T12:04:34+08:00">2022-01-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qi-zou.github.io/2022/01/06/prometheus%E7%9B%91%E6%8E%A7%E4%B9%8Bnode%E5%90%84%E9%A1%B9%E6%8C%87%E6%A0%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/me/images/avatar.gif">
      <meta itemprop="name" content="niuwa">
      <meta itemprop="description" content="整理和记录所思所想">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛蛙">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/me/2022/01/06/prometheus%E7%9B%91%E6%8E%A7%E4%B9%8Bnode%E5%90%84%E9%A1%B9%E6%8C%87%E6%A0%87/" class="post-title-link" itemprop="url">prometheus监控之node各项指标</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-01-06 11:21:19" itemprop="dateCreated datePublished" datetime="2022-01-06T11:21:19+08:00">2022-01-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-10 09:09:22" itemprop="dateModified" datetime="2022-01-10T09:09:22+08:00">2022-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/me/categories/prometheus/" itemprop="url" rel="index"><span itemprop="name">prometheus</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>整理node采集的指标，并记录常用的指标</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/me/2022/01/06/prometheus%E7%9B%91%E6%8E%A7%E4%B9%8Bnode%E5%90%84%E9%A1%B9%E6%8C%87%E6%A0%87/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qi-zou.github.io/2022/01/06/img-test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/me/images/avatar.gif">
      <meta itemprop="name" content="niuwa">
      <meta itemprop="description" content="整理和记录所思所想">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛蛙">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/me/2022/01/06/img-test/" class="post-title-link" itemprop="url">img-test</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-01-06 10:43:23" itemprop="dateCreated datePublished" datetime="2022-01-06T10:43:23+08:00">2022-01-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-10 14:14:47" itemprop="dateModified" datetime="2022-01-10T14:14:47+08:00">2022-01-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>用于测试图片是否可以正常展示</p>
<img src="/me/2022/01/06/img-test/image-20220106104706904.png" class="" title="This is an image">

<p>操作步骤：</p>
<ol>
<li>在_config.yml 中修改如下配置为 true<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure></li>
<li>文章中使用图片</li>
</ol>
<ul>
<li>第一种可以使用，makedown的格式  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![image-20220106105728993](image-20220106105728993.png)</span><br></pre></td></tr></table></figure></li>
<li>第二种 使用如下方式  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img image-20220106104706904.png This is an image %&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>注意：其中的 image-20220106104706904.png 为需要展示的图片名称，该图片会放在与当前博客同名的目录下面</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qi-zou.github.io/2022/01/06/my-first-blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/me/images/avatar.gif">
      <meta itemprop="name" content="niuwa">
      <meta itemprop="description" content="整理和记录所思所想">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛蛙">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/me/2022/01/06/my-first-blog/" class="post-title-link" itemprop="url">新的第一篇博客</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-06 10:16:17 / 修改时间：12:08:55" itemprop="dateCreated datePublished" datetime="2022-01-06T10:16:17+08:00">2022-01-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="开始新的博客"><a href="#开始新的博客" class="headerlink" title="开始新的博客"></a>开始新的博客</h1><p>这里使用github+hexo搭建了自己的博客，参考了如下的博客文章：<br>[GitHub Pages + Hexo搭建个人博客网站，史上最全教程] <a target="_blank" rel="noopener" href="https://blog.csdn.net/yaorongke/article/details/119089190">https://blog.csdn.net/yaorongke/article/details/119089190</a></p>
<h1 id="hexo操作"><a href="#hexo操作" class="headerlink" title="hexo操作"></a>hexo操作</h1><ol>
<li>创建新博客文档<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &#x27;博客文章标题&#x27;</span><br></pre></td></tr></table></figure></li>
<li>生成html文件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure></li>
<li>发布到github<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure></li>
<li>启动本地<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="在不同机器上更新博客"><a href="#在不同机器上更新博客" class="headerlink" title="在不同机器上更新博客"></a>在不同机器上更新博客</h1><ol>
<li><p>在新机器上安装npm</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 这里根据不同的系统进行安装</span><br></pre></td></tr></table></figure></li>
<li><p>安装hexo</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure></li>
<li><p>拉取github上面的项目</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:xxxxx/xxx.git</span><br></pre></td></tr></table></figure></li>
</ol>
<p>然后即可在博客的根目录下使用hexo进行操作</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qi-zou.github.io/2021/12/22/prometheus%E6%9C%8D%E5%8A%A1%E5%8A%A8%E6%80%81%E5%8F%91%E7%8E%B0%E4%B9%8Bhttp_sd_config/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/me/images/avatar.gif">
      <meta itemprop="name" content="niuwa">
      <meta itemprop="description" content="整理和记录所思所想">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛蛙">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/me/2021/12/22/prometheus%E6%9C%8D%E5%8A%A1%E5%8A%A8%E6%80%81%E5%8F%91%E7%8E%B0%E4%B9%8Bhttp_sd_config/" class="post-title-link" itemprop="url">prometheus服务动态发现之http_sd_config</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-22 11:27:29" itemprop="dateCreated datePublished" datetime="2021-12-22T11:27:29+08:00">2021-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-10 09:12:42" itemprop="dateModified" datetime="2022-01-10T09:12:42+08:00">2022-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/me/categories/prometheus/" itemprop="url" rel="index"><span itemprop="name">prometheus</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>prometheus提供了多种动态服务发现的方式，这里讲一下<code>http_sd_config</code>的配置方法</p>
<h2 id="官方说明"><a href="#官方说明" class="headerlink" title="官方说明"></a>官方说明</h2><p>先来看下prometheus官方文档的说明</p>
<p><img src="image-20211222181659426.png" alt="image-20211222181659426"></p>
<p>大致就是说：需要自己提供一个http访问地址，prometheus能够通过访问该地址得到需要发现的服务节点的数据，并且该地址返回的json数据结构要与图中保持一致。</p>
<h2 id="配置说明"><a href="#配置说明" class="headerlink" title="配置说明"></a>配置说明</h2><p>再来看下关于该选项有哪些配置项：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取目标服务的地址</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">&lt;string&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新频率，间隔多久再次调用url获取目标服务</span></span><br><span class="line">[ <span class="attr">refresh_interval:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">60s</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># API服务器的身份验证信息，用于访问url时验证身份用</span></span><br><span class="line"><span class="comment"># 下面这几项 `basic_auth`, `authorization` 、`oauth2` 是互斥的，也就是说只需要根据具体情况配一项身份验证的方式就可以</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可选的HTTP基本认证信息。其中 `password` and `password_file` 这两项是互斥的</span></span><br><span class="line"><span class="attr">basic_auth:</span></span><br><span class="line">  [ <span class="attr">username:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line">  [ <span class="attr">password:</span> <span class="string">&lt;secret&gt;</span> ]</span><br><span class="line">  [ <span class="attr">password_file:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可选的“授权”头配置。</span></span><br><span class="line"><span class="attr">authorization:</span></span><br><span class="line">  <span class="comment"># Sets the authentication type.</span></span><br><span class="line">  [ <span class="attr">type:</span> <span class="string">&lt;string&gt;</span> <span class="string">|</span> <span class="attr">default:</span> <span class="string">Bearer</span> ]</span><br><span class="line">  <span class="comment"># Sets the credentials. It is mutually exclusive with</span></span><br><span class="line">  <span class="comment"># `credentials_file`.</span></span><br><span class="line">  [ <span class="attr">credentials:</span> <span class="string">&lt;secret&gt;</span> ]</span><br><span class="line">  <span class="comment"># Sets the credentials to the credentials read from the configured file.</span></span><br><span class="line">  <span class="comment"># It is mutually exclusive with `credentials`.</span></span><br><span class="line">  [ <span class="attr">credentials_file:</span> <span class="string">&lt;filename&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># #可选OAuth 2.0配置。</span></span><br><span class="line"><span class="attr">oauth2:</span></span><br><span class="line">  [ <span class="string">&lt;oauth2&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optional proxy URL.</span></span><br><span class="line">[ <span class="attr">proxy_url:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure whether HTTP requests follow HTTP 3xx redirects.</span></span><br><span class="line">[ <span class="attr">follow_redirects:</span> <span class="string">&lt;bool&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="literal">true</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># TLS configuration.</span></span><br><span class="line"><span class="attr">tls_config:</span></span><br><span class="line">  [ <span class="string">&lt;tls_config&gt;</span> ]</span><br></pre></td></tr></table></figure>

<p>如果自己提供的接口不用验证身份，那么只需要配置url和刷新频率即可；</p>
<h2 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h2><p><strong>前提：</strong></p>
<ul>
<li>已经部署好了prometheus和各exporter的节点</li>
<li>其中prometheus最好是最新版（2.30版本及以前的版本好像不支持）</li>
</ul>
<h3 id="开发动态获取服务的接口"><a href="#开发动态获取服务的接口" class="headerlink" title="开发动态获取服务的接口"></a>开发动态获取服务的接口</h3><p>我这里用的java开发的一个后端程序，controller的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/prometheus&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrometheusController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getTarget&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTarget</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List exporterList = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        Map target = <span class="keyword">new</span> HashMap();</span><br><span class="line">        <span class="comment">// 服务节点地址</span></span><br><span class="line">        List targetList = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        targetList.add(<span class="string">&quot;172.18.40.40:9100&quot;</span>);</span><br><span class="line">        targetList.add(<span class="string">&quot;172.18.40.91:9100&quot;</span>);</span><br><span class="line">        <span class="comment">// 标签</span></span><br><span class="line">        Map labelsMap = <span class="keyword">new</span> HashMap();</span><br><span class="line">        labelsMap.put(<span class="string">&quot;acc&quot;</span> , <span class="string">&quot;acc1&quot;</span>);</span><br><span class="line">        labelsMap.put(<span class="string">&quot;uuid&quot;</span> , <span class="string">&quot;123123&quot;</span>);</span><br><span class="line"></span><br><span class="line">        target.put(<span class="string">&quot;targets&quot;</span> , targetList);</span><br><span class="line">        target.put(<span class="string">&quot;labels&quot;</span> , labelsMap);</span><br><span class="line"></span><br><span class="line">        exporterList.add(target);</span><br><span class="line">        <span class="keyword">return</span> JSONObject.toJSONString(exporterList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在浏览器中，访问该接口，查看返回的数据如下：</p>
<p><img src="image-20211222184806273.png" alt="image-20211222184806273"></p>
<h3 id="修改prometheus的配置"><a href="#修改prometheus的配置" class="headerlink" title="修改prometheus的配置"></a>修改prometheus的配置</h3><p>prometheus的配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;test-node&#x27;</span></span><br><span class="line">    <span class="attr">http_sd_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">http://172.26.62.xx:12000/prometheus/getTarget</span></span><br><span class="line">        <span class="attr">refresh_interval:</span> <span class="string">5s</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>配置说明：</p>
<p><a target="_blank" rel="noopener" href="http://172.26.62.xx:12000/prometheus/getTarget%EF%BC%9A%E8%AF%A5%E5%9C%B0%E5%9D%80%E6%98%AF%E5%90%8E%E7%AB%AF%E7%A8%8B%E5%BA%8F%E6%8F%90%E4%BE%9B%E7%9A%84">http://172.26.62.xx:12000/prometheus/getTarget：该地址是后端程序提供的</a></p>
</blockquote>
<p>修改完prometheus的配置后，重启prometheus或调用prometheus的reload的接口(<a href="http://ip:port/-/reload">http://ip:port/-/reload</a>)</p>
<h3 id="检查"><a href="#检查" class="headerlink" title="检查"></a>检查</h3><p>访问prometheus的界面，查看我后端接口提供的服务是否被发现</p>
<p><img src="image-20211222184910138.png" alt="image-20211222184910138"></p>
<p>可以发现，prometheus已经成功监控到了提供的服务；</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>修改接口提供的数据，在不重启和不重新加载prometheus的情况下，观察prometheus会不会变化监控的节点</p>
<ol>
<li>我在后端服务接口中，添加了一个不存在的节点</li>
</ol>
<p><img src="image-20211222185422933.png" alt="image-20211222185422933"></p>
<ol start="2">
<li>等待几秒钟后，可以发现prometheus发现了该节点，但还没有去访问该节点去获取监控数据，因此状态为UNKNOWN</li>
</ol>
<p><img src="image-20211222185438507.png" alt="image-20211222185438507"></p>
<ol start="3">
<li>在等几秒，prometheus去访问该几点时，发现服务是不存在的，调整状态为DOWN</li>
</ol>
<p><img src="image-20211222185501042.png" alt="image-20211222185501042"></p>
<ol start="4">
<li>从prometheus的日志也可以看出，每隔 5s 就掉一次我的后端服务</li>
</ol>
<p><img src="image-20211222191259320.png" alt="image-20211222191259320"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qi-zou.github.io/2021/12/15/Nginx%E8%AE%BF%E9%97%AE%E9%99%90%E5%88%B6%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/me/images/avatar.gif">
      <meta itemprop="name" content="niuwa">
      <meta itemprop="description" content="整理和记录所思所想">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛蛙">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/me/2021/12/15/Nginx%E8%AE%BF%E9%97%AE%E9%99%90%E5%88%B6%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">Nginx访问限制配置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-15 12:01:32" itemprop="dateCreated datePublished" datetime="2021-12-15T12:01:32+08:00">2021-12-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-07 12:04:45" itemprop="dateModified" datetime="2022-01-07T12:04:45+08:00">2022-01-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="限制下载速度"><a href="#限制下载速度" class="headerlink" title="限制下载速度"></a>限制下载速度</h1><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location xxx &#123;</span><br><span class="line">            limit_rate 100k;</span><br><span class="line">						...</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p><img src="image-20220107120229415.png" alt="image-20220107120229415"></p>
<p>重启nginx后，可以发现下载速度，确实被限制在 100k/s 左右</p>
<p><img src="image-20220107120250231.png" alt="image-20220107120250231"></p>
<h1 id="限制并发数"><a href="#限制并发数" class="headerlink" title="限制并发数"></a>限制并发数</h1><p>添加如下两行参数</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">http&#123;</span><br><span class="line">		limit_conn_zone $binary_remote_addr zone=one:10m;</span><br><span class="line">		...</span><br><span class="line">		service&#123;</span><br><span class="line">				...</span><br><span class="line">				location xxx&#123;</span><br><span class="line">						limit_conn one <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="image-20220107120309413.png" alt="image-20220107120309413"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qi-zou.github.io/2021/10/10/Prometheus%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/me/images/avatar.gif">
      <meta itemprop="name" content="niuwa">
      <meta itemprop="description" content="整理和记录所思所想">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛蛙">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/me/2021/10/10/Prometheus%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">Prometheus学习记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-10-10 22:34:26" itemprop="dateCreated datePublished" datetime="2021-10-10T22:34:26+08:00">2021-10-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-11 10:29:18" itemprop="dateModified" datetime="2022-01-11T10:29:18+08:00">2022-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/me/categories/prometheus/" itemprop="url" rel="index"><span itemprop="name">prometheus</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ol>
<li>Prometheus 是什么；</li>
<li>我们为什么要去了解Prometheus ；</li>
<li>为什么是Prometheus 而不是其他的监控系统；Prometheus 与 目前 相对比较活跃的其他监控系统有哪些 优势；</li>
<li>了解Prometheus 的基本架构，以及Prometheus 是如何运作的；</li>
</ol>
<h2 id="Prometheus-是什么？"><a href="#Prometheus-是什么？" class="headerlink" title="Prometheus 是什么？"></a>Prometheus 是什么？</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Prometheus受启发于Google的Brogmon监控系统（相似的Kubernetes是从Google的Brog系统演变而来），从2012年开始由前Google工程师在Soundcloud以开源软件的形式进行研发，并且于2015年早期对外发布早期版本。2016年5月继Kubernetes之后成为第二个正式加入CNCF基金会的项目，同年6月正式发布1.0版本。2017年底发布了基于全新存储层的2.0版本，能更好地与容器平台、云平台配合。</p>
<p><img src="https://static.sitestack.cn/projects/prometheus-book/quickstart/static/prometheus-release-roadmaps.png" alt="https://static.sitestack.cn/projects/prometheus-book/quickstart/static/prometheus-release-roadmaps.png"></p>
<p>Prometheus简史</p>
<p>Prometheus作为新一代的云原生监控系统，目前已经有超过650+位贡献者参与到Prometheus的研发工作上，并且超过120+项的第三方集成。</p>
<p>目前的社区活跃度：从如下在github上的截图可以看出其活跃度 (截图时间2021.9.2)<br><img src="https://s2.loli.net/2022/01/10/vA58OKX3NgrDjkz.png" alt="20220110223828"></p>
<h3 id="监控目标"><a href="#监控目标" class="headerlink" title="监控目标"></a>监控目标</h3><ul>
<li>长期趋势分析：通过对监控样本数据的持续收集和统计，对监控指标进行长期趋势分析。例如，通过对磁盘空间增长率的判断，我们可以提前预测在未来什么时间节点上需要对资源进行扩容。（<strong>实际就是使用PromQL表达式（内置的函数）对采集的监控数据进行数学分析（统计学）</strong> ）</li>
<li>对照分析：两个版本的系统运行资源使用情况的差异如何？在不同容量情况下系统的并发和负载变化如何？通过监控能够方便的对系统进行跟踪和比较。（<strong>同样是基于监控数据，例如：两个相同应用在不同的系统资源下的并发和负载变化对比</strong>）</li>
<li>告警：当系统出现或者即将出现故障时，监控系统需要迅速反应并通知管理员，从而能够对问题进行快速的处理或者提前预防问题的发生，避免出现对业务的影响。（）  <strong>Prometheus 服务端产生告警，由Alertmanager进行处理</strong></li>
<li>故障分析与定位：当问题发生后，需要对问题进行调查和处理。通过对不同监控监控以及历史数据的分析，能够找到并解决根源问题。（<strong>分析监控数据</strong>）</li>
<li>数据可视化：通过可视化仪表盘能够直接获取系统的运行状态、资源使用情况、以及服务运行状态等直观的信息。（<strong>Prometheus 自带数据可视化UI ， 但是比较简单</strong>）</li>
</ul>
<p>这里还是只是对Prometheus 进行了一个简单的介绍，我们可以简单的将其类比和宇云的 monitor(云监控中心)</p>
<h2 id="为什么要去了解Prometheus"><a href="#为什么要去了解Prometheus" class="headerlink" title="为什么要去了解Prometheus"></a>为什么要去了解Prometheus</h2><p>或者说为什么要了解其他的 监控系统，我们的平台已经有了 云监控中心；</p>
<p>个人认为有如下几个原因：</p>
<ol>
<li>了解其他的监控系统，学习它们的优点，对 我们平台的云监控进行优化，例如 监控指标的完善与优化</li>
<li>目前我们的云监控中心是基于虚拟机的监控，对容器的监控还没有涉足，需要学习这些优秀产品的经验，为后期和宇云进军k8s做准备</li>
</ol>
<p>当然针对不同的需求，还需要具体分析</p>
<h2 id="各监控系统的对比"><a href="#各监控系统的对比" class="headerlink" title="各监控系统的对比"></a>各监控系统的对比</h2><p>目前市面上相对比较活跃的监控系统：</p>
<ul>
<li>Prometheus</li>
<li>Zabbix</li>
<li>Nagios</li>
</ul>
<h3 id="Prometheus-与-Zabbix-对比"><a href="#Prometheus-与-Zabbix-对比" class="headerlink" title="Prometheus 与 Zabbix 对比"></a>Prometheus 与 Zabbix 对比</h3><h3 id="架构对比"><a href="#架构对比" class="headerlink" title="架构对比"></a>架构对比</h3><p>prometheus:<br><img src="https://s2.loli.net/2022/01/10/4XbgTnJldGeV6vF.png" alt="20220110224409"></p>
<p>zabbix:<br><img src="https://s2.loli.net/2022/01/10/5msuDeH1y2polVK.png" alt="20220110224548"></p>
<h3 id="综合对比"><a href="#综合对比" class="headerlink" title="综合对比"></a>综合对比</h3><p><img src="https://s2.loli.net/2022/01/10/d6bKIP7oscNl4Oy.png" alt="20220110224609"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>我们要对容器进行兼容，则需要学习Prometheus。</p>
<h3 id="Prometheus-与-Nagios-对比"><a href="#Prometheus-与-Nagios-对比" class="headerlink" title="Prometheus 与 Nagios 对比"></a>Prometheus 与 Nagios 对比</h3><h3 id="架构对比-1"><a href="#架构对比-1" class="headerlink" title="架构对比"></a>架构对比</h3><p><img src="https://static.sitestack.cn/projects/prometheus-book/quickstart/static/nagios-platform.png" alt="https://static.sitestack.cn/projects/prometheus-book/quickstart/static/nagios-platform.png"></p>
<p>Nagios监控系统</p>
<p>Nagios的主要功能是监控服务和主机。Nagios软件需要安装在一台独立的服务器上运行，该服务器称为监控中心。每一台被监控的硬件主机或者服务都需要运行一个与监控中心服务器进行通信的Nagios软件后台程序，可以理解为Agent或者插件；</p>
<p><img src="https://static.sitestack.cn/projects/prometheus-book/quickstart/static/nagios-ui.png" alt="https://static.sitestack.cn/projects/prometheus-book/quickstart/static/nagios-ui.png"></p>
<p>Nagios主机监控页面</p>
<p>首先对于Nagios而言，大部分的监控能力都是围绕系统的一些边缘性的问题，主要针对系统服务和资源的状态以及应用程序的可用性。 例如：Nagios通过check_disk插件可以用于检查磁盘空间，check_load用于检查CPU负载等。这些插件会返回4种Nagios可识别的状态，0(OK)表示正常，1(WARNING)表示警告，2(CRITTCAL)表示错误，3(UNKNOWN)表示未知错误，并通过Web UI显示出来。</p>
<p>对于Nagios这类系统而言，其核心是采用了测试和告警(check&amp;alert)的监控系统模型。 对于基于这类模型的监控系统而言往往存在以下问题：</p>
<ul>
<li>与业务脱离的监控：监控系统获取到的监控指标与业务本身也是一种分离的关系。好比客户可能关注的是服务的可用性、服务的SLA等级，而监控系统却只能根据系统负载去产生告警；</li>
<li>运维管理难度大：Nagios这一类监控系统本身运维管理难度就比较大，需要有专业的人员进行安装，配置和管理，而且过程并不简单；</li>
<li>可扩展性低： 监控系统自身难以扩展，以适应监控规模的变化；</li>
<li>问题定位难度大：当问题产生之后（比如主机负载异常增加）对于用户而言，他们看到的依然是一个黑盒，他们无法了解主机上服务真正的运行情况，因此当故障发生后，这些告警信息并不能有效的支持用户对于故障根源问题的分析和定位。</li>
</ul>
<p>nagios现在用的相对比较少了，数据展示太不友好，还需要插件实现，ui也不够美观；自动化批量监控也掉链子。</p>
<h3 id="Prometheus-的优势"><a href="#Prometheus-的优势" class="headerlink" title="Prometheus 的优势"></a>Prometheus 的优势</h3><p>Prometheus是一个开源的完整监控解决方案，其对传统监控系统的测试和告警模型进行了彻底的颠覆，形成了基于中央化的规则计算、统一分析和告警的新模型。 相比于传统监控系统Prometheus具有以下优点：</p>
<ul>
<li><strong>易于管理</strong>  Prometheus基于Pull模型的架构方式，可以在任何地方（本地电脑，开发环境，测试环境）搭建我们的监控系统。对于一些复杂的情况，还可以使用Prometheus服务发现(Service Discovery)的能力动态管理监控目标。</li>
<li><strong>监控服务的内部运行状态</strong>  Pometheus鼓励用户监控服务的内部状态，基于Prometheus丰富的Client库，用户可以轻松的<strong>在应用程序中添加对Prometheus的支持</strong>，从而让用户可以获取服务和应用内部真正的运行状态。<br>  <img src="https://s2.loli.net/2022/01/10/TF1wfWp6UDcgCzY.png" alt="20220110224102"></li>
<li><strong>强大的数据模型</strong>  所有采集的监控数据均以指标(metric)的形式保存在内置的时间序列数据库当中(TSDB)。所有的样本除了基本的指标名称以外，还包含一组用于描述该样本特征的标签。  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http_request_status&#123;code=&#x27;200&#x27;,content_path=&#x27;/api/path&#x27;, environment=&#x27;produment&#x27;&#125; =&gt; [value1@timestamp1,value2@timestamp2...]</span><br><span class="line">http_request_status&#123;code=&#x27;200&#x27;,content_path=&#x27;/api/path2&#x27;, environment=&#x27;produment&#x27;&#125; =&gt; [value1@timestamp1,value2@timestamp2...]</span><br></pre></td></tr></table></figure>
</li>
<li><strong>强大的查询语言PromQL</strong>  Prometheus内置了一个强大的数据查询语言PromQL。 通过PromQL可以实现对监控数据的查询、聚合。同时PromQL也被应用于数据可视化(如Grafana)以及告警当中。</li>
<li><strong>高效</strong>  对于监控系统而言，大量的监控任务必然导致有大量的数据产生。而Prometheus可以高效地处理这些数据，对于单一Prometheus Server实例而言它可以处理：<ul>
<li>数以百万的监控指标</li>
<li><code>每秒处理数十万的数据点</code></li>
</ul>
</li>
<li><strong>可扩展</strong>  Prometheus是如此简单，因此你可以在每个数据中心、每个团队运行独立的Prometheus Sevrer。Prometheus对于联邦集群的支持，可以让多个Prometheus实例产生一个逻辑集群，当单实例Prometheus Server处理的任务量过大时，通过使用功能分区(sharding)+联邦集群(federation)可以对其进行扩展。</li>
<li><strong>易于集成</strong>  使用Prometheus可以快速搭建监控服务，并且可以非常方便地在应用程序中进行集成。目前支持： Java， JMX， Python， Go，Ruby， .Net， Node.js等等语言的客户端SDK，基于这些SDK可以快速让应用程序纳入到Prometheus的监控当中，或者开发自己的监控数据收集程序。同时这些客户端收集的监控数据，不仅仅支持Prometheus，还能支持Graphite这些其他的监控工具。  同时Prometheus还支持与其他的监控系统进行集成：Graphite， Statsd， Collected， Scollector， muini， Nagios等。  Prometheus社区还提供了大量第三方实现的监控数据采集支持：JMX， CloudWatch， EC2， MySQL， PostgresSQL， Haskell， Bash， SNMP， Consul， Haproxy， Mesos， Bind， CouchDB， Django， Memcached， RabbitMQ， Redis， RethinkDB， Rsyslog等等。</li>
<li><strong>可视化</strong>  Prometheus Server中自带了一个Prometheus UI，通过这个UI可以方便地直接对数据进行查询，并且支持直接以图形化的形式展示数据。同时Prometheus还提供了一个独立的基于Ruby On Rails的Dashboard解决方案Promdash。最新的Grafana可视化工具也已经提供了完整的Prometheus支持，基于Grafana可以创建更加精美的监控图标。基于Prometheus提供的API还可以实现自己的监控可视化UI。</li>
<li><strong>开放性</strong>  通常来说当我们需要监控一个应用程序时，一般需要该应用程序提供对相应监控系统协议的支持。因此应用程序会与所选择的监控系统进行绑定。为了减少这种绑定所带来的限制。对于决策者而言要么你就直接在应用中集成该监控系统的支持，要么就在外部创建单独的服务来适配不同的监控系统。  而对于Prometheus来说，使用Prometheus的client library的输出格式不止支持Prometheus的格式化数据，也可以输出支持其它监控系统的格式化数据，比如Graphite。  <strong>因此你甚至可以在不使用Prometheus的情况下，采用Prometheus的client library来让你的应用程序支持监控数据采集。</strong></li>
</ul>
<p>可以说 Prometheus 是一个监控告警系统，也是一个时序数据库</p>
<p>了解了 Prometheus 是什么，也分析了 为什么要了解 Prometheus ， 现在来 看看 Prometheus 是怎么做的</p>
<h2 id="Prometheus-解析"><a href="#Prometheus-解析" class="headerlink" title="Prometheus 解析"></a>Prometheus 解析</h2><h3 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h3><p><img src="https://s2.loli.net/2022/01/10/lWZISmsc35DgNyi.png" alt="20220110161226"></p>
<h3 id="三大套件"><a href="#三大套件" class="headerlink" title="三大套件"></a>三大套件</h3><ul>
<li>Prometheus Server 主要负责数据采集和存储，提供PromQL查询语言的支持。</li>
<li>Alertmanager 警告管理器，用来进行报警，告警信息推送。</li>
<li>Push Gateway 支持临时性Job主动推送指标的中间网关。<br><img src="https://s2.loli.net/2022/01/10/g3KtPwJfuSvm59F.png" alt="20220110224903"></li>
</ul>
<h3 id="Prometheus-Server"><a href="#Prometheus-Server" class="headerlink" title="Prometheus Server"></a>Prometheus Server</h3><h3 id="Prometheus-是如何采集监控数据"><a href="#Prometheus-是如何采集监控数据" class="headerlink" title="Prometheus 是如何采集监控数据"></a>Prometheus 是如何采集监控数据</h3><p>监控数据的获取有如下两种方式：</p>
<ul>
<li>Pull 的方式  通过定时抓取 目标上的Metrics数据，每个抓取目标都需要暴露一个HTTP服务接口用于Prometheus定时抓取，这种调用被监控对象获取监控数据的方式被称为Pull  <img src="https://s2.loli.net/2022/01/10/2FbqXkZROdJUYfB.png" alt="20210902134110181.png"></li>
<li>Push的方式  Prometheus提供对PushGateway的支持，这些系统主动推送metrics到PushGateway，而Prometheus只是定时去Gateway上抓取数据。<br>  <img src="https://s2.loli.net/2022/01/10/spdMak7KgcI1Pui.png" alt="20220110225032"></li>
</ul>
<p>什么情况下会用到 Push的方式呢？</p>
<ul>
<li>Prometheus 采用定时 Pull 模式，可能由于子网络或者防火墙的原因，不能直接拉取各个 Target 的指标数据，此时可以采用各个 Target 往 PushGateway 上 Push 数据，然后 Prometheus 去 PushGateway 上定时 pull。</li>
<li>其次在监控各个业务数据时，需要将各个不同的业务数据进行统一汇总，此时也可以采用 PushGateway 来统一收集，然后 Prometheus 来统一拉取。</li>
</ul>
<p>采集数据的主要流程如下：</p>
<ul>
<li>Prometheus server 定期从静态配置的主机或服务发现的 targets 拉取数据(zookeeper，consul，DNS SRV Lookup等方式)</li>
<li>当新拉取的数据大于配置内存缓存区的时候（或者 超过了设定的时间窗口的时间），Prometheus会将数据持久化到磁盘，也可以远程持久化到云端。</li>
<li>Prometheus通过PromQL、API、Console和其他可视化组件如Grafana、Promdash展示数据。</li>
<li>Prometheus 可以配置rules，然后定时查询数据，当条件触发的时候，会将告警推送到配置的Alertmanager。</li>
<li>Alertmanager收到告警的时候，会根据配置，聚合，去重，降噪，最后发出警告， Alertmanager是独立于Prometheus的一个组件，可以支持Prometheus的查询语句，提供十分灵活的报警方式。</li>
</ul>
<p>指标数据的样式如下：</p>
<p><a target="_blank" rel="noopener" href="http://172.26.65.49:9100/metrics">http://172.26.65.49:9100/metrics</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># HELP node_cpu_guest_seconds_total Seconds the CPUs spent in guests (VMs) for each mode.</span><br><span class="line"># TYPE node_cpu_guest_seconds_total counter</span><br><span class="line">node_cpu_guest_seconds_total&#123;cpu=&quot;0&quot;,mode=&quot;nice&quot;&#125; 0</span><br><span class="line">node_cpu_guest_seconds_total&#123;cpu=&quot;0&quot;,mode=&quot;user&quot;&#125; 0</span><br><span class="line">node_cpu_guest_seconds_total&#123;cpu=&quot;1&quot;,mode=&quot;nice&quot;&#125; 0</span><br><span class="line">node_cpu_guest_seconds_total&#123;cpu=&quot;1&quot;,mode=&quot;user&quot;&#125; 0</span><br><span class="line">node_cpu_guest_seconds_total&#123;cpu=&quot;2&quot;,mode=&quot;nice&quot;&#125; 0</span><br><span class="line">node_cpu_guest_seconds_total&#123;cpu=&quot;2&quot;,mode=&quot;user&quot;&#125; 0</span><br><span class="line">node_cpu_guest_seconds_total&#123;cpu=&quot;3&quot;,mode=&quot;nice&quot;&#125; 0</span><br><span class="line">node_cpu_guest_seconds_total&#123;cpu=&quot;3&quot;,mode=&quot;user&quot;&#125; 0</span><br><span class="line"># HELP node_cpu_package_throttles_total Number of times this CPU package has been throttled.</span><br><span class="line"># TYPE node_cpu_package_throttles_total counter</span><br><span class="line">node_cpu_package_throttles_total&#123;package=&quot;0&quot;&#125; 0</span><br><span class="line"># HELP node_cpu_scaling_frequency_hertz Current scaled CPU thread frequency in hertz.</span><br><span class="line"># TYPE node_cpu_scaling_frequency_hertz gauge</span><br><span class="line">node_cpu_scaling_frequency_hertz&#123;cpu=&quot;0&quot;&#125; 2.44895e+09</span><br><span class="line">node_cpu_scaling_frequency_hertz&#123;cpu=&quot;1&quot;&#125; 2.402221e+09</span><br><span class="line">node_cpu_scaling_frequency_hertz&#123;cpu=&quot;2&quot;&#125; 2.415515e+09</span><br><span class="line">node_cpu_scaling_frequency_hertz&#123;cpu=&quot;3&quot;&#125; 2.200134e+09</span><br><span class="line"># HELP node_cpu_scaling_frequency_max_hertz Maximum scaled CPU thread frequency in hertz.</span><br><span class="line"># TYPE node_cpu_scaling_frequency_max_hertz gauge</span><br><span class="line">node_cpu_scaling_frequency_max_hertz&#123;cpu=&quot;0&quot;&#125; 2.7e+09</span><br><span class="line">node_cpu_scaling_frequency_max_hertz&#123;cpu=&quot;1&quot;&#125; 2.7e+09</span><br><span class="line">node_cpu_scaling_frequency_max_hertz&#123;cpu=&quot;2&quot;&#125; 2.7e+09</span><br><span class="line">node_cpu_scaling_frequency_max_hertz&#123;cpu=&quot;3&quot;&#125; 2.7e+09</span><br><span class="line"># HELP node_cpu_scaling_frequency_min_hertz Minimum scaled CPU thread frequency in hertz.</span><br><span class="line"># TYPE node_cpu_scaling_frequency_min_hertz gauge</span><br><span class="line">node_cpu_scaling_frequency_min_hertz&#123;cpu=&quot;0&quot;&#125; 5e+08</span><br><span class="line">node_cpu_scaling_frequency_min_hertz&#123;cpu=&quot;1&quot;&#125; 5e+08</span><br><span class="line">node_cpu_scaling_frequency_min_hertz&#123;cpu=&quot;2&quot;&#125; 5e+08</span><br><span class="line">node_cpu_scaling_frequency_min_hertz&#123;cpu=&quot;3&quot;&#125; 5e+08</span><br></pre></td></tr></table></figure>

<h3 id="Metric类型（指标类型）"><a href="#Metric类型（指标类型）" class="headerlink" title="Metric类型（指标类型）"></a>Metric类型（指标类型）</h3><p>Prometheus定义了4种不同的指标类型(metric type)：Counter（计数器）、Gauge（仪表盘）、Histogram（直方图）、Summary（摘要）</p>
<p><strong>Counter：只增不减的计数器</strong></p>
<p>Counter类型的指标其工作方式和计数器一样，只增不减（除非系统发生重置）。</p>
<p>常见的监控指标，如http_requests_total，node_cpu都是Counter类型的监控指标。 一般在定义Counter类型指标的名称时推荐使用_total作为后缀。</p>
<p><strong>Gauge：可增可减的仪表盘</strong></p>
<p>Gauge类型的指标侧重于反应系统的当前状态。</p>
<p>常见指标如：node_memory_MemFree（主机当前空闲的内容大小）、node_memory_MemAvailable（可用内存大小）都是Gauge类型的监控指标。</p>
<p><strong>使用Histogram和Summary分析数据分布情况</strong></p>
<p>除了Counter和Gauge类型的监控指标以外，Prometheus还定义了Histogram和Summary的指标类型。Histogram和Summary主用用于统计和分析样本的分布情况</p>
<p>在大多数情况下人们都倾向于使用某些量化指标的平均值，例如CPU的平均使用率、页面的平均响应时间。这种方式的问题很明显，以系统API调用的平均响应时间为例：如果大多数API请求都维持在100ms的响应时间范围内，而个别请求的响应时间需要5s，那么就会导致某些WEB页面的响应时间落到中位数的情况，而这种现象被称为长尾问题。</p>
<p>为了区分是平均的慢还是长尾的慢，最简单的方式就是按照请求延迟的范围进行分组。例如，统计延迟在010ms之间的请求数有多少而1020ms之间的请求数又有多少。通过这种方式可以快速分析系统慢的原因。Histogram和Summary都是为了能够解决这样问题的存在，通过Histogram和Summary类型的监控指标，我们可以快速了解监控样本的分布情况。</p>
<p>例如： wal_fsync处理的处理时间 (Summary类型)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># HELP prometheus_tsdb_wal_fsync_duration_seconds Duration of WAL fsync.</span><br><span class="line"># TYPE prometheus_tsdb_wal_fsync_duration_seconds summary</span><br><span class="line">prometheus_tsdb_wal_fsync_duration_seconds&#123;quantile=&quot;0.5&quot;&#125; 0.012352463</span><br><span class="line">prometheus_tsdb_wal_fsync_duration_seconds&#123;quantile=&quot;0.9&quot;&#125; 0.014458005</span><br><span class="line">prometheus_tsdb_wal_fsync_duration_seconds&#123;quantile=&quot;0.99&quot;&#125; 0.017316173</span><br><span class="line">prometheus_tsdb_wal_fsync_duration_seconds_sum 2.888716127000002</span><br><span class="line">prometheus_tsdb_wal_fsync_duration_seconds_count 216</span><br></pre></td></tr></table></figure>

<h3 id="Exporter-详解"><a href="#Exporter-详解" class="headerlink" title="Exporter 详解"></a>Exporter 详解</h3><p>广义上讲所有可以向Prometheus提供监控样本数据的程序都可以被称为一个Exporter，而Exporter的一个实例称为target。</p>
<p>Exporter 是 安装在被监控的目标（主机或服务）上，用于采集目标上相应的监控数据，同时会暴露出Http的接口，普罗米修斯通过HTTP协议使用Pull的方式周期性拉取相应的数据。</p>
<p><img src="https://static.sitestack.cn/projects/prometheus-book/exporter/static/prometheus-exporter.png" alt="https://static.sitestack.cn/projects/prometheus-book/exporter/static/prometheus-exporter.png"></p>
<p><strong>Exporter的来源</strong></p>
<p>从Exporter的来源上来讲，主要分为两类：</p>
<ul>
<li>社区提供的  Prometheus社区提供了丰富的Exporter实现，涵盖了从基础设施，中间件以及网络等各个方面的监控功能。这些Exporter可以实现大部分通用的监控需求。下表列举一些社区中常用的Exporter：(<a target="_blank" rel="noopener" href="https://prometheus.io/docs/instrumenting/exporters/">Exporters and integrations | Prometheus</a>官网)  <a target="_blank" rel="noopener" href="https://www.notion.so/9c3a22421d0f4e92a7eecd761c6a9a72">Untitled</a></li>
<li>用户自定义的  除了直接使用社区提供的Exporter程序以外，用户还可以基于Prometheus提供的Client Library创建自己的Exporter程序，目前Promthues社区官方提供了对以下编程语言的支持：Go、Java/Scala、Python、Ruby。同时还有第三方实现的如：Bash、C++、Common Lisp、Erlang,、Haskeel、Lua、Node.js、PHP、Rust等。  【使用Client Java构建Exporter程序】<a target="_blank" rel="noopener" href="https://www.bookstack.cn/read/prometheus-book/exporter-client_library_java.md">https://www.bookstack.cn/read/prometheus-book/exporter-client_library_java.md</a></li>
</ul>
<h3 id="Prometheus监控数据的存储"><a href="#Prometheus监控数据的存储" class="headerlink" title="Prometheus监控数据的存储"></a>Prometheus监控数据的存储</h3><p>数据存储的方式分为如下两种：</p>
<ul>
<li>一种是本地存储。通过Prometheus自带的时序数据库将数据保存到本地磁盘，为了性能考虑，建议使用SSD。但本地存储的容量毕竟有限，建议不要保存超过一个月的数据。</li>
<li>另一种是远程存储，适用于存储大量监控数据。通过中间层的适配器的转化，目前Prometheus支持OpenTSDB、InfluxDB、Elasticsearch等后端存储，通过适配器实现Prometheus存储的remote write和remote read接口，便可以接入Prometheus作为远端存储使用。</li>
</ul>
<p><strong>本地存储</strong><br><img src="https://s2.loli.net/2022/01/10/AiXPxNTDVLsmWlz.png" alt="20220110225208"></p>
<p>特点：</p>
<p>① 自身运维和管理的复杂度低</p>
<p>Prometheus 2.x 采用自定义的存储格式将样本数据保存在本地磁盘当中。如下所示，按照两个小时为一个时间窗口，将两小时内产生的数据存储在一个块(Block)中，每一个块中包含该时间窗口内的所有样本数据(chunks)，元数据文件(meta.json)以及索引文件(index)。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">t0            t1             t2             now</span><br><span class="line"> ┌───────────┐  ┌───────────┐  ┌───────────┐</span><br><span class="line"> │           │  │           │  │           │                 ┌────────────┐</span><br><span class="line"> │           │  │           │  │  mutable  │ &lt;─── write ──── ┤ Prometheus │</span><br><span class="line"> │           │  │           │  │           │                 └────────────┘</span><br><span class="line"> └───────────┘  └───────────┘  └───────────┘                        ^</span><br><span class="line">       └──────────────┴───────┬──────┘                              │</span><br><span class="line">                              │                                   query</span><br><span class="line">                              │                                     │</span><br><span class="line">                            merge ──────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<p>当前时间窗口内正在收集的样本数据，<strong>Prometheus则会直接将数据保存在内存当中</strong>。为了确保此期间如果Prometheus发生崩溃或者重启时能够恢复数据，<strong>Prometheus启动时会从写入日志(WAL)进行重播，从而恢复数据</strong>。此期间如果通过API删除时间序列，删除记录也会保存在单独的逻辑文件当中(tombstone)。</p>
<p>在文件系统中这些块保存在单独的目录当中，Prometheus保存块数据的目录结构如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">./data</span><br><span class="line">   |- 01BKGV7JBM69T2G1BGBGM6KB12 # 块</span><br><span class="line">      |- meta.json  # 元数据</span><br><span class="line">      |- wal        # 写入日志</span><br><span class="line">        |- 000002</span><br><span class="line">        |- 000001</span><br><span class="line">   |- 01BKGTZQ1SYQJTR4PB43C8PD98  # 块</span><br><span class="line">      |- meta.json  #元数据</span><br><span class="line">      |- index   # 索引文件</span><br><span class="line">      |- chunks  # 样本数据</span><br><span class="line">        |- 000001</span><br><span class="line">      |- tombstones # 逻辑数据</span><br><span class="line">   |- 01BKGTZQ1HHWHV8FBJXW1Y3W0K</span><br><span class="line">      |- meta.json</span><br><span class="line">      |- wal</span><br><span class="line">        |-000001</span><br></pre></td></tr></table></figure>

<p>本地存储配置：<br><img src="https://s2.loli.net/2022/01/10/LTGFmsN2awX1Sk3.png" alt="20220110225415"></p>
<p>对Prometheus Server的本地磁盘空间做容量规划时，可以通过以下公式计算：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">needed_disk_space = retention_time_seconds * ingested_samples_per_second * bytes_per_sample</span><br></pre></td></tr></table></figure>

<p>其中：保留时间(retention_time_seconds)、每秒获取样本数(ingested_samples_per_second)、样本大小(bytes_per_sample)</p>
<p>减少本地磁盘的容量需求，可以通过 减少 每秒获取样本数 这个数值 的方式 ；有两种手段，一是减少时间序列的数量，二是增加采集样本的时间间隔。考虑到Prometheus会对时间序列进行压缩效率，减少时间序列的数量效果更明显。</p>
<p><strong>远程存储</strong><br><img src="https://s2.loli.net/2022/01/10/fW85C4wrsaqTFom.png" alt="20220110225442"></p>
<p>特点：</p>
<p>① 可以持久化大量历史数据</p>
<p>② 灵活扩展</p>
<p>③ 方便迁移</p>
<p>为了保持Prometheus的简单性，Prometheus并没有尝试在自身中解决以上问题，而是通过定义两个标准接口(remote_write/remote_read)，让用户可以基于这两个接口对接将数据保存到任意第三方的存储服务中，这种方式在Promthues中称为Remote Storage。</p>
<p>【Remote Write】（远程写）</p>
<p>用户可以在Prometheus配置文件中指定Remote Write(远程写)的URL地址，一旦设置了该配置项，Prometheus将采集到的样本数据通过HTTP的形式发送给适配器(Adaptor)。而用户则可以在适配器中对接外部任意的服务。外部服务可以是真正的存储系统，公有云的存储服务，也可以是消息队列等任意形式。</p>
<p><img src="https://static.sitestack.cn/projects/prometheus-book/ha/static/remote-write-path-2.png" alt="https://static.sitestack.cn/projects/prometheus-book/ha/static/remote-write-path-2.png"></p>
<p>Remote Write</p>
<p>【Remote Read】（远程读）</p>
<p>Promthues的Remote Read(远程读)也通过了一个适配器实现。在远程读的流程当中，当用户发起查询请求后，Promthues将向remote_read中配置的URL发起查询请求(matchers,ranges)，Adaptor根据请求条件从第三方存储服务中获取响应的数据。同时将数据转换为Promthues的原始样本数据返回给Prometheus Server。</p>
<p>当获取到样本数据后，Promthues在本地使用PromQL对样本数据进行二次处理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注意：启用远程读设置后，只在数据查询时有效，对于规则文件的处理，以及Metadata API的处理都只基于Prometheus本地存储完成。</span><br></pre></td></tr></table></figure>

<p><img src="https://static.sitestack.cn/projects/prometheus-book/ha/static/remote_read_path-2.png" alt="https://static.sitestack.cn/projects/prometheus-book/ha/static/remote_read_path-2.png"></p>
<p>Remote Read</p>
<p><strong>适配器：需要部署到数据库所在的服务器，暴露HTTP服务，并且将数据写入数据库中</strong></p>
<p>远程读写配置：</p>
<p>Prometheus配置文件中添加remote_write和remote_read配置，其中url用于指定远程读/写的HTTP服务地址。如果该URL启动了认证则可以通过<strong>basic_auth</strong>进行安全认证配置。对于https的支持需要设定<strong>tls_concig</strong>。<strong>proxy_url</strong>主要用于Prometheus无法直接访问适配器服务的情况下。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The URL of the endpoint to send samples to.</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">&lt;string&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Timeout for requests to the remote write endpoint.</span></span><br><span class="line">[ <span class="attr">remote_timeout:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">30s</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Custom HTTP headers to be sent along with each remote write request.</span></span><br><span class="line"><span class="comment"># Be aware that headers that are set by Prometheus itself can&#x27;t be overwritten.</span></span><br><span class="line"><span class="attr">headers:</span></span><br><span class="line">  [ <span class="string">&lt;string&gt;:</span> <span class="string">&lt;string&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of remote write relabel configurations.</span></span><br><span class="line"><span class="attr">write_relabel_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;relabel_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Name of the remote write config, which if specified must be unique among remote write configs.</span></span><br><span class="line"><span class="comment"># The name will be used in metrics and logging in place of a generated value to help users distinguish between</span></span><br><span class="line"><span class="comment"># remote write configs.</span></span><br><span class="line">[ <span class="attr">name:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enables sending of exemplars over remote write. Note that exemplar storage itself must be enabled for exemplars to be scraped in the first place.</span></span><br><span class="line">[ <span class="attr">send_exemplars:</span> <span class="string">&lt;boolean&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="literal">false</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets the `Authorization` header on every remote write request with the</span></span><br><span class="line"><span class="comment"># configured username and password.</span></span><br><span class="line"><span class="comment"># password and password_file are mutually exclusive.</span></span><br><span class="line"><span class="attr">basic_auth:</span></span><br><span class="line">  [ <span class="attr">username:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line">  [ <span class="attr">password:</span> <span class="string">&lt;secret&gt;</span> ]</span><br><span class="line">  [ <span class="attr">password_file:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optional `Authorization` header configuration.</span></span><br><span class="line"><span class="attr">authorization:</span></span><br><span class="line">  <span class="comment"># Sets the authentication type.</span></span><br><span class="line">  [ <span class="attr">type:</span> <span class="string">&lt;string&gt;</span> <span class="string">|</span> <span class="attr">default:</span> <span class="string">Bearer</span> ]</span><br><span class="line">  <span class="comment"># Sets the credentials. It is mutually exclusive with</span></span><br><span class="line">  <span class="comment"># `credentials_file`.</span></span><br><span class="line">  [ <span class="attr">credentials:</span> <span class="string">&lt;secret&gt;</span> ]</span><br><span class="line">  <span class="comment"># Sets the credentials to the credentials read from the configured file.</span></span><br><span class="line">  <span class="comment"># It is mutually exclusive with `credentials`.</span></span><br><span class="line">  [ <span class="attr">credentials_file:</span> <span class="string">&lt;filename&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optionally configures AWS&#x27;s Signature Verification 4 signing process to</span></span><br><span class="line"><span class="comment"># sign requests. Cannot be set at the same time as basic_auth, authorization, or oauth2.</span></span><br><span class="line"><span class="comment"># To use the default credentials from the AWS SDK, use `sigv4: &#123;&#125;`.</span></span><br><span class="line"><span class="attr">sigv4:</span></span><br><span class="line">  <span class="comment"># The AWS region. If blank, the region from the default credentials chain</span></span><br><span class="line">  <span class="comment"># is used.</span></span><br><span class="line">  [ <span class="attr">region:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># The AWS API keys. If blank, the environment variables `AWS_ACCESS_KEY_ID`</span></span><br><span class="line">  <span class="comment"># and `AWS_SECRET_ACCESS_KEY` are used.</span></span><br><span class="line">  [ <span class="attr">access_key:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line">  [ <span class="attr">secret_key:</span> <span class="string">&lt;secret&gt;</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Named AWS profile used to authenticate.</span></span><br><span class="line">  [ <span class="attr">profile:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># AWS Role ARN, an alternative to using AWS API keys.</span></span><br><span class="line">  [ <span class="attr">role_arn:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optional OAuth 2.0 configuration.</span></span><br><span class="line"><span class="comment"># Cannot be used at the same time as basic_auth, authorization, or sigv4.</span></span><br><span class="line"><span class="attr">oauth2:</span></span><br><span class="line">  [ <span class="string">&lt;oauth2&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configures the remote write request&#x27;s TLS settings.</span></span><br><span class="line"><span class="attr">tls_config:</span></span><br><span class="line">  [ <span class="string">&lt;tls_config&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optional proxy URL.</span></span><br><span class="line">[ <span class="attr">proxy_url:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure whether HTTP requests follow HTTP 3xx redirects.</span></span><br><span class="line">[ <span class="attr">follow_redirects:</span> <span class="string">&lt;bool&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="literal">true</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configures the queue used to write to remote storage.</span></span><br><span class="line"><span class="attr">queue_config:</span></span><br><span class="line">  <span class="comment"># Number of samples to buffer per shard before we block reading of more</span></span><br><span class="line">  <span class="comment"># samples from the WAL. It is recommended to have enough capacity in each</span></span><br><span class="line">  <span class="comment"># shard to buffer several requests to keep throughput up while processing</span></span><br><span class="line">  <span class="comment"># occasional slow remote requests.</span></span><br><span class="line">  [ <span class="attr">capacity:</span> <span class="string">&lt;int&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="number">2500</span> ]</span><br><span class="line">  <span class="comment"># Maximum number of shards, i.e. amount of concurrency.</span></span><br><span class="line">  [ <span class="attr">max_shards:</span> <span class="string">&lt;int&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="number">200</span> ]</span><br><span class="line">  <span class="comment"># Minimum number of shards, i.e. amount of concurrency.</span></span><br><span class="line">  [ <span class="attr">min_shards:</span> <span class="string">&lt;int&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="number">1</span> ]</span><br><span class="line">  <span class="comment"># Maximum number of samples per send.</span></span><br><span class="line">  [ <span class="attr">max_samples_per_send:</span> <span class="string">&lt;int&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="number">500</span>]</span><br><span class="line">  <span class="comment"># Maximum time a sample will wait in buffer.</span></span><br><span class="line">  [ <span class="attr">batch_send_deadline:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">5s</span> ]</span><br><span class="line">  <span class="comment"># Initial retry delay. Gets doubled for every retry.</span></span><br><span class="line">  [ <span class="attr">min_backoff:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">30ms</span> ]</span><br><span class="line">  <span class="comment"># Maximum retry delay.</span></span><br><span class="line">  [ <span class="attr">max_backoff:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">5s</span> ]</span><br><span class="line">  <span class="comment"># Retry upon receiving a 429 status code from the remote-write storage.</span></span><br><span class="line">  <span class="comment"># This is experimental and might change in the future.</span></span><br><span class="line">  [ <span class="attr">retry_on_http_429:</span> <span class="string">&lt;boolean&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="literal">false</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configures the sending of series metadata to remote storage.</span></span><br><span class="line"><span class="comment"># Metadata configuration is subject to change at any point</span></span><br><span class="line"><span class="comment"># or be removed in future releases.</span></span><br><span class="line"><span class="attr">metadata_config:</span></span><br><span class="line">  <span class="comment"># Whether metric metadata is sent to remote storage or not.</span></span><br><span class="line">  [ <span class="attr">send:</span> <span class="string">&lt;boolean&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="literal">true</span> ]</span><br><span class="line">  <span class="comment"># How frequently metric metadata is sent to remote storage.</span></span><br><span class="line">  [ <span class="attr">send_interval:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">1m</span> ]</span><br><span class="line">  <span class="comment"># Maximum number of samples per send.</span></span><br><span class="line">  [ <span class="attr">max_samples_per_send:</span> <span class="string">&lt;int&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="number">500</span>]</span><br></pre></td></tr></table></figure>

<p>自定义Remote Storage Adaptor（自定义适配器）</p>
<p>详情见：<a target="_blank" rel="noopener" href="https://www.bookstack.cn/read/prometheus-book/ha-prometheus-remote-storage.md">https://www.bookstack.cn/read/prometheus-book/ha-prometheus-remote-storage.md</a></p>
<p>目前Prometheus社区也提供了部分对于第三方数据库的Remote Storage支持：<br><img src="https://s2.loli.net/2022/01/10/oOcUiTAahxPEg1Q.png" alt="20220110225757"></p>
<p>自定义Remote Storage Adaptor（自定义适配器）以及 使用Influxdb作为Remote Storage的案例</p>
<p>详情见：<a target="_blank" rel="noopener" href="https://www.bookstack.cn/read/prometheus-book/ha-prometheus-remote-storage.md">https://www.bookstack.cn/read/prometheus-book/ha-prometheus-remote-storage.md</a></p>
<h3 id="Prometheus-高可用部署方案"><a href="#Prometheus-高可用部署方案" class="headerlink" title="Prometheus 高可用部署方案"></a>Prometheus 高可用部署方案</h3><p>Prometheus的本地存储给Prometheus带来了简单高效的使用体验，可以让Promthues在单节点的情况下满足大部分用户的监控需求。但是本地存储也同时限制了Prometheus的可扩展性，带来了数据持久化等一系列的问题。通过Prometheus的Remote Storage特性可以解决这一系列问题，包括Promthues的动态扩展，以及历史数据的存储。</p>
<p>而除了数据持久化问题以外，影响Promthues性能表现的另外一个重要因素就是数据采集任务量，以及单台Promthues能够处理的时间序列数。因此当监控规模大到Promthues单台无法有效处理的情况下，可以选择利用Promthues的联邦集群的特性，将Promthues的监控任务划分到不同的实例当中。</p>
<h3 id="基本HA：服务可用性"><a href="#基本HA：服务可用性" class="headerlink" title="基本HA：服务可用性"></a>基本HA：服务可用性</h3><p>由于Promthues的Pull机制的设计，为了确保Promthues服务的可用性，用户只需要部署多套Prometheus Server实例，并且采集相同的Exporter目标即可。</p>
<p><img src="https://s2.loli.net/2022/01/11/xDUuMBghdOrAY3z.png" alt="20220111102211"></p>
<p>基本的HA模式只能确保Promthues服务的可用性问题，但是不解决Prometheus Server之间的数据一致性问题以及持久化问题(数据丢失后无法恢复)，也无法进行动态的扩展。因此这种部署方式适合监控规模不大，Promthues Server也不会频繁发生迁移的情况，并且只需要保存短周期监控数据的场景。</p>
<h3 id="基本HA-远程存储"><a href="#基本HA-远程存储" class="headerlink" title="基本HA + 远程存储"></a>基本HA + 远程存储</h3><p>在基本HA模式的基础上通过添加Remote Storage存储支持，将监控数据保存在第三方存储服务上。</p>
<p><img src="https://s2.loli.net/2022/01/11/Bis1wHDNqLT2mEv.png" alt="20220111102237"></p>
<p>在解决了Promthues服务可用性的基础上，同时确保了数据的持久化，当Promthues Server发生宕机或者数据丢失的情况下，可以快速的恢复。 同时Promthues Server可能很好的进行迁移。因此，该方案适用于用户监控规模不大，但是希望能够将监控数据持久化，同时能够确保Promthues Server的可迁移性的场景。</p>
<h3 id="基本HA-远程存储-联邦集群"><a href="#基本HA-远程存储-联邦集群" class="headerlink" title="基本HA + 远程存储 + 联邦集群"></a>基本HA + 远程存储 + 联邦集群</h3><p>当单台Promthues Server无法处理大量的采集任务时，用户可以考虑基于Prometheus联邦集群的方式将监控采集任务划分到不同的Promthues实例当中即在任务级别功能分区。<br><img src="https://s2.loli.net/2022/01/11/6DW5ZoFQC41qr3w.png" alt="20220111102254"></p>
<p>这种部署方式一般适用于两种场景：</p>
<p>场景一：单数据中心 + 大量的采集任务</p>
<p>这种场景下Promthues的性能瓶颈主要在于大量的采集任务，因此用户需要利用Prometheus联邦集群的特性，将不同类型的采集任务划分到不同的Promthues子服务中，从而实现功能分区。例如一个Promthues Server负责采集基础设施相关的监控指标，另外一个Prometheus Server负责采集应用监控指标。再有上层Prometheus Server实现对数据的汇聚。</p>
<p>场景二：多数据中心</p>
<p>这种模式也适合与多数据中心的情况，当Promthues Server无法直接与数据中心中的Exporter进行通讯时，在每一个数据中部署一个单独的Promthues Server负责当前数据中心的采集任务是一个不错的方式。这样可以避免用户进行大量的网络配置，只需要确保主Promthues Server实例能够与当前数据中心的Prometheus Server通讯即可。 中心Promthues Server负责实现对多数据中心数据的聚合。</p>
<h3 id="告警处理Alertmanager"><a href="#告警处理Alertmanager" class="headerlink" title="告警处理Alertmanager"></a>告警处理Alertmanager</h3><p>如下所示，通过在Prometheus中定义AlertRule（告警规则），Prometheus会周期性的对告警规则进行计算，如果满足告警触发条件就会向Alertmanager发送告警信息。<br><img src="https://s2.loli.net/2022/01/10/8cJPyEwRiqXGOFL.png" alt="20220110225920"></p>
<h3 id="自定义Prometheus告警规则"><a href="#自定义Prometheus告警规则" class="headerlink" title="自定义Prometheus告警规则"></a>自定义Prometheus告警规则</h3><p>定义告警规则：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">groups:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">example</span></span><br><span class="line">    <span class="attr">rules:</span>  <span class="comment"># Alert for any instance that is unreachable for &gt;5 minutes.  </span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">alert:</span> <span class="string">InstanceDown</span>    </span><br><span class="line">        <span class="attr">expr:</span> <span class="string">up</span> <span class="string">==</span> <span class="number">0</span>    </span><br><span class="line">        <span class="attr">for:</span> <span class="string">5m</span>    </span><br><span class="line">        <span class="attr">labels:</span>      </span><br><span class="line">        <span class="attr">severity:</span> <span class="string">page</span>    </span><br><span class="line">        <span class="attr">annotations:</span>      </span><br><span class="line">        <span class="attr">summary:</span> <span class="string">&quot;Instance <span class="template-variable">&#123;&#123; $labels.instance &#125;&#125;</span> down&quot;</span>      </span><br><span class="line">        <span class="attr">description:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; $labels.instance &#125;&#125;</span> of job <span class="template-variable">&#123;&#123; $labels.job &#125;&#125;</span> has been down for more than 5 minutes.&quot;</span>  <span class="comment"># Alert for any instance that has a median request latency &gt;1s.  </span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">alert:</span> <span class="string">APIHighRequestLatency</span>    </span><br><span class="line">        <span class="attr">expr:</span> <span class="string">api_http_request_latencies_second&#123;quantile=&quot;0.5&quot;&#125;</span> <span class="string">&gt;</span> <span class="number">1</span>    </span><br><span class="line">        <span class="attr">for: 10m    annotations:</span>      </span><br><span class="line">        <span class="attr">summary:</span> <span class="string">&quot;High request latency on <span class="template-variable">&#123;&#123; $labels.instance &#125;&#125;</span>&quot;</span>      </span><br><span class="line">        <span class="attr">description:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; $labels.instance &#125;&#125;</span> has a median request latency above 1s (current value: <span class="template-variable">&#123;&#123; $value &#125;&#125;</span>s)&quot;</span></span><br></pre></td></tr></table></figure>

<p>在告警规则文件中，我们可以将一组相关的规则设置定义在一个group下。在每一个group中我们可以定义多个告警规则(rule)。一条告警规则主要由以下几部分组成：</p>
<ul>
<li>alert：告警规则的名称。</li>
<li>expr：基于PromQL表达式告警触发条件，用于计算是否有时间序列满足该条件。</li>
<li>for：评估等待时间，可选参数。用于表示只有当触发条件持续一段时间后才发送告警。在等待期间新产生告警的状态为pending。</li>
<li>labels：自定义标签，允许用户指定要附加到告警上的一组附加标签。</li>
<li>annotations：用于指定一组附加信息，比如用于描述告警详细信息的文字等，annotations的内容在告警产生时会一同作为参数发送到Alertmanager。</li>
</ul>
<h3 id="监控数据的可视化"><a href="#监控数据的可视化" class="headerlink" title="监控数据的可视化"></a>监控数据的可视化</h3><h3 id="Prometheus自带的数据可视化界面"><a href="#Prometheus自带的数据可视化界面" class="headerlink" title="Prometheus自带的数据可视化界面"></a>Prometheus自带的数据可视化界面</h3><p><a target="_blank" rel="noopener" href="http://172.26.65.49:9090/graph">http://172.26.65.49:9090/graph</a></p>
<p>例子：指标 prometheus_http_requests_total<br><img src="https://s2.loli.net/2022/01/10/7MBT8fGxvpcukt3.png" alt="20220110230003"></p>
<h3 id="使用Grafana展示数据"><a href="#使用Grafana展示数据" class="headerlink" title="使用Grafana展示数据"></a>使用Grafana展示数据</h3><p><a target="_blank" rel="noopener" href="http://172.26.65.49:3000/?orgId=1">http://172.26.65.49:3000/?orgId=1</a><br><img src="https://s2.loli.net/2022/01/10/lQte3FBZvSaVf8R.png" alt="20220110230024"></p>
<p>网图：</p>
<p><img src="https://img-blog.csdnimg.cn/20210713100126346.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzUwNzQxMA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/20210713100126346.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzUwNzQxMA==,size_16,color_FFFFFF,t_70"></p>
<p>在这里插入图片描述</p>
<h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h3 id="监控Mysql"><a href="#监控Mysql" class="headerlink" title="监控Mysql"></a>监控Mysql</h3><p>前提条件：</p>
<ol>
<li>prometheus和grafana环境已搭建</li>
<li>docker环境已搭建</li>
<li>mysqld-exporter 所部署的机器上需要存在 mysql实例</li>
</ol>
<p>操作步骤如下：</p>
<ol>
<li>下载 <strong>prom/mysqld-exporter</strong> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull prom/mysqld-exporter</span><br></pre></td></tr></table></figure>
</li>
<li>在grafana上下载mysql监控数据展示模板 （ID：11323） <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://grafana.com/grafana/dashboards/11323</span><br></pre></td></tr></table></figure>
</li>
<li>运行mysqld-exporter <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d  --name mysql_exporter   --restart always  -e DATA_SOURCE_NAME=&#x27;root:root$123@(172.26.65.49:3306)/&#x27; --network host  prom/mysqld-exporter</span><br></pre></td></tr></table></figure>
</li>
<li>在prometheus的配置中添加 mysql_exporter 的job <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;MySQL&#x27;</span>    </span><br><span class="line">   <span class="attr">static_configs:</span>      </span><br><span class="line">       <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;172.26.65.49:9104&#x27;</span>]        </span><br><span class="line">       <span class="attr">labels:</span>          </span><br><span class="line">       <span class="attr">instance:</span> <span class="number">172.26</span><span class="number">.65</span><span class="number">.49</span><span class="string">:3306</span>    </span><br><span class="line">       <span class="attr">metrics_path:</span> <span class="string">&#x27;/metrics&#x27;</span></span><br></pre></td></tr></table></figure>
 <img src="https://s2.loli.net/2022/01/10/ZC3JpAKfBLTvihF.png" alt="20220110230129"></li>
<li>重启prometheus</li>
</ol>
<p>数据展示：<br><img src="https://s2.loli.net/2022/01/10/ozgLXB3p8kZ5tDm.png" alt="20220110230146"></p>
<p><img src="https://s2.loli.net/2022/01/10/A5vSMPGzU3Fjrhb.png" alt="20220110230202"></p>
<p><img src="https://s2.loli.net/2022/01/10/v1yXg4aoTQ3i5fZ.png" alt="20220110230224"></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="什么是时序数据库？"><a href="#什么是时序数据库？" class="headerlink" title="什么是时序数据库？"></a>什么是时序数据库？</h3><p>时间序列数据库主要用于指处理带时间标签（按照时间的顺序变化，即时间序列化）的数据，带时间标签的数据也称为时间序列数据。</p>
<p>例如：InfluxDB 、 ElasticSearch 等</p>
<p>es存时序数据如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;results&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;series&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;cpu_load_short&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;columns&quot;</span>: [</span><br><span class="line">                        <span class="string">&quot;time&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;value&quot;</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">&quot;values&quot;</span>: [</span><br><span class="line">                        [</span><br><span class="line">                            <span class="string">&quot;2015-06-11T20:46:02Z&quot;</span>,</span><br><span class="line">                            <span class="number">0.64</span></span><br><span class="line">                        ]</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/me/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/me/">1</a><a class="page-number" href="/me/page/2/">2</a><span class="page-number current">3</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">niuwa</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/me/js/comments.js"></script><script src="/me/js/utils.js"></script><script src="/me/js/motion.js"></script><script src="/me/js/schemes/muse.js"></script><script src="/me/js/next-boot.js"></script>

  





  





</body>
</html>
